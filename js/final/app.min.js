!function e(t,r,n){function i(s,u){if(!r[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";function n(e,t){function r(t,r,n){e.go(t,r,n)}function n(e){t.open(e,"_blank")}var i=this;i.goToState=r,i.goToExternal=n}t.exports=n},{}],2:[function(e,t,r){!function(){"use strict";angular.module("scheduleBuilder",["ui.router","ngSanitize","ngCookies","ngMaterial","angulartics","angulartics.google.analytics"]),e("./config"),e("./courses.factory"),e("./reverseLookup.factory"),e("./schedule.factory"),e("./_base.controller"),e("./courseFind.controller"),e("./courseViewAndSelect.controller"),e("./scheduleViewAndSelect.controller"),e("./courseDisplayAndSelect.directive"),e("./scheduleDisplay.directive"),e("./generateSchedules.directive")}()},{"./_base.controller":1,"./config":3,"./courseDisplayAndSelect.directive":4,"./courseFind.controller":5,"./courseViewAndSelect.controller":6,"./courses.factory":7,"./generateSchedules.directive":8,"./reverseLookup.factory":9,"./schedule.factory":10,"./scheduleDisplay.directive":11,"./scheduleViewAndSelect.controller":12}],3:[function(e,t,r){angular.module("scheduleBuilder").config(["$stateProvider","$urlRouterProvider","$mdThemingProvider",function(e,t,r){e.state("schedule",{url:"/schedule",templateUrl:"html/schedule.html",controller:"CourseFindCtrl",controllerAs:"vm"}).state("schedule.viewCourse",{url:"/course/{id}",templateUrl:"html/course_view_and_select.partial.html",controller:"CourseViewAndSelectCtrl",controllerAs:"vm"}).state("schedule.viewSchedule",{url:"/{scheduleId}",templateUrl:"html/schedule_view_and_select.partial.html",controller:"ScheduleViewAndSelectCtrl",controllerAs:"vm"}),t.otherwise("schedule");var n={50:"#0073e1",100:"#0066c8",200:"#0059ae",300:"#004c95",400:"#003f7b",500:"#003262",600:"#002548",700:"#00182f",800:"#000b15",900:"#000000",A100:"#0080fb",A200:"#158dff",A400:"#2f99ff",A700:"#000000"};r.definePalette("berkeley-primary",n);var i={50:"#785301",100:"#916501",200:"#ab7601",300:"#c48802",400:"#dd9902",500:"#f6ab02",600:"#fdbd2e",700:"#fdc548",800:"#fecd61",900:"#fed57a",A100:"#fdbd2e",A200:"#FDB515",A400:"#f6ab02",A700:"#fedd93"};r.definePalette("berkeley-accent",i),r.theme("default").primaryPalette("berkeley-primary").accentPalette("berkeley-accent")}])},{}],4:[function(e,t,r){function n(){function e(e,t,r,n){function o(){a.selectAllSections?r.course.sections.forEach(function(e){e.selected=!0}):r.course.sections.forEach(function(e){e.selected=!1}),s()}function s(){n.setStale(!0)}function u(e){return a.sectionTypeMapping[e.type]}i.call(this,e,t);var a=this;a.sectionTypeMapping={LEC:0,DIS:3,GRP:5,LAB:7},a.selectAllSections=!1,a.onChangeSelectAllSections=o,a.setSchedulesStale=s,a.extractSectionTypeMapping=u}return e.prototype=Object.create(i.prototype),{scope:{course:"="},controller:["$state","$window","$scope","scheduleFactory",e],controllerAs:"vm",templateUrl:"html/course_display_and_select.partial.html"}}var i=e("./_base.controller");angular.module("scheduleBuilder").directive("sbCourseDisplayAndSelect",[n])},{"./_base.controller":1}],5:[function(e,t,r){function n(e,t,r,n,o){function s(e){return e?S.subjectAreasList.filter(u(e)):S.subjectAreasList}function u(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.code).indexOf(e)||0===angular.lowercase(t.description).indexOf(e)}}function a(e){return e?void r.getCoursesQBySubjectAreaCode(e.code).then(function(e){S.coursesList=e,S.courseIsDisabled=!1}):(S.courseIsDisabled=!0,void(S.coursesList=[]))}function c(e){return e?S.coursesList.filter(l(e)):S.coursesList}function l(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.courseNumber).indexOf(e)||0===angular.lowercase(t.title).indexOf(e)}}function d(e){e&&y(e)}function f(e){var t=e.courseNumber;return parseInt(T.exec(t)[2])}function h(e){var t=e.courseNumber;return T.exec(t)[3]}function p(e){var t=e.courseNumber;return T.exec(t)[1]}function g(){n.setStale()}function m(){n.setInDisplayMode(!1),S.goToState("schedule")}function y(e){n.addCourse(e)}function v(e){n.dropCourse(e)}o.pageTrack("/schedule"),i.call(this,e,t);var S=this;S.scheduleIsReady=n.isReady(),S.subjectAreaIsDisabled=!1,S.courseIsDisabled=!0,S.selectedCourse=null,S.inDisplayMode=!1,S.coursesList=[],S.subjectAreasList=[],S.currCourse=null,S.searchSubjectArea=s,S.selectSubjectArea=a,S.searchCourse=c,S.selectCourse=d,S.extractCourseNumberNumber=f,S.extractCourseNumberSuffix=h,S.extractCourseNumberPrefix=p,S.addedCoursesList=n.getAllCourses(),S.setSchedulesStale=g,S.leaveDisplayMode=m,S.addCourse=y,S.dropCourse=v,S.generateSchedulesQ=n.generateSchedulesQ,r.getSubjectAreasQ().then(function(e){S.subjectAreasList=e}),n.registerSetReadyListener(function(e){S.scheduleIsReady=e}),n.registerSetInDisplayModeListener(function(e){S.inDisplayMode=e}),n.registerSetCurrCourseListener(function(e){S.currCourse=e}),n.registerAddCourseListener(function(e){S.addedCoursesList.push(e),S.scheduleIsReady&&S.goToState("schedule.viewCourse",{id:e.id})}),n.registerDropCourseListener(function(e){S.addedCoursesList.remove(e),0!=S.addedCoursesList.length?S.goToState("schedule.viewCourse",{id:S.addedCoursesList[S.addedCoursesList.length-1].id}):S.goToState("schedule")});var T=/^([a-zA-Z]*)(\d+)([a-zA-Z]*)/}var i=e("./_base.controller");n.prototype=Object.create(i.prototype),angular.module("scheduleBuilder").controller("CourseFindCtrl",["$state","$window","courses","scheduleFactory","$analytics",n])},{"./_base.controller":1}],6:[function(e,t,r){function n(e,t,r,n,o){o.pageTrack("/schedule/course/{}".replace("{}",r.id)),i.call(this,e,t);var s=this;s.selectedCourse=null,n.getCourseQById(r.id).then(function(e){s.selectedCourse=e,n.setCurrCourse(e)})}var i=e("./_base.controller");n.prototype=Object.create(i.prototype),angular.module("scheduleBuilder").controller("CourseViewAndSelectCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",n])},{"./_base.controller":1}],7:[function(e,t,r){"use strict";function n(e){function t(){return a}function r(t){if(t in u)return u[t];var r=n(t),o=s.replace("{}",r),a=e.get(o).then(function(e){var t=e.data;return Object.keys(t).map(function(e){return i.parse(t[e])})},function(){return[]});return u[t]=a,a}function n(e){return e.replace(/\W/g,"")}var u={},a=e.get(o).then(function(e){var t=e.data.subjectAreas;return Object.keys(t).map(function(e){return{code:e,description:t[e]}})});return{getSubjectAreasQ:t,getCoursesQBySubjectAreaCode:r}}var i=e("../models/course"),o="data/final/departments.json",s="data/final/fa16/classes/{}.json";angular.module("scheduleBuilder").factory("courses",["$http",n])},{"../models/course":13}],8:[function(e,t,r){function n(){function e(e,t,r){function n(){var e=r.getCurrScheduleId();void 0!==e&&g.goToState("schedule.viewSchedule",{scheduleId:e})}function s(){g.generateMessage="Generating",r.generateSchedulesQ().then(function(){r.filterSchedules(),r.reorderSchedules(),g.generateMessage="Generate Schedules",n()})}function u(){g.showOptions=!g.showOptions,r.setSchedulingOption("showOptions",g.showOptions)}function a(){switch(g.gapOption){case g.gapOptions.minimize:r.setSchedulingOption("minimizeGaps",!0),r.setSchedulingOption("maximizeGaps",!1);break;case g.gapOptions.maximize:r.setSchedulingOption("minimizeGaps",!1),r.setSchedulingOption("maximizeGaps",!0);break;case g.gapOptions.none:r.setSchedulingOption("minimizeGaps",!1),r.setSchedulingOption("maximizeGaps",!1)}null!=g.gapOption&&(g.preferPartOfDay=g.partsOfDay.none,r.setSchedulingOption("preferMornings",!1),r.setSchedulingOption("preferAfternoons",!1),r.setSchedulingOption("preferEvenings",!1)),r.reorderSchedules()}function c(){switch(g.preferPartOfDay){case g.partsOfDay.morning:r.setSchedulingOption("preferMornings",!0),r.setSchedulingOption("preferAfternoons",!1),r.setSchedulingOption("preferEvenings",!1);break;case g.partsOfDay.afternoon:r.setSchedulingOption("preferMornings",!1),r.setSchedulingOption("preferAfternoons",!0),r.setSchedulingOption("preferEvenings",!1);break;case g.partsOfDay.evening:r.setSchedulingOption("preferMornings",!1),r.setSchedulingOption("preferAfternoons",!1),r.setSchedulingOption("preferEvenings",!0);break;case g.partsOfDay.none:r.setSchedulingOption("preferMornings",!1),r.setSchedulingOption("preferAfternoons",!1),r.setSchedulingOption("preferEvenings",!1)}g.preferPartOfDay!=g.partsOfDay.none&&(g.gapOption=g.gapOptions.none,r.setSchedulingOption("minimizeGaps",!1),r.setSchedulingOption("maximizeGaps",!1)),r.reorderSchedules()}function l(){r.setSchedulingOption("noTimeConflicts",g.noTimeConflicts),r.filterSchedules(),r.reorderSchedules()}function d(){for(var e=y.slice(),t=i.parse(g.selectedDayStartTimeJson);e.length>0&&e[0].compareTo(t)<0;)e.shift();g.dayEndTimes=e,r.setSchedulingOption("dayStartTime",t),r.filterSchedules(),r.reorderSchedules()}function f(){for(var e=y.slice(),t=i.parse(g.selectedDayEndTimeJson);e.length>0&&e[e.length-1].compareTo(t)>0;)e.pop();g.dayStartTimes=e,r.setSchedulingOption("dayEndTime",t),r.filterSchedules(),r.reorderSchedules()}function h(e){var t=i.parse(g.selectedDayStartTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}function p(e){var t=i.parse(g.selectedDayEndTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}o.call(this,e,t);for(var g=this,m=[],y=[],v=8,S=24,T=v;S>T;T++)m.push(new i(T,0)),y.push(new i(T,0)),y.push(new i(T,30));m.push(new i(T,0)),y.push(new i(T,0));var O=r.getSchedulingOptions();g.scheduleIsStale=r.isStale(),g.generateMessage="Generate Schedules",g.showOptions=O.showOptions,g.viewSchedules=n,g.generateAndViewSchedules=s,g.toggleOptions=u,g.gapOptions={minimize:"minimizeGaps",maximize:"maximizeGaps",none:"dontWorryAboutGaps"},O.minimizeGaps?g.gapOption=g.gapOptions.minimize:O.maximizeGaps?g.gapOption=g.gapOptions.maximize:g.gapOption=g.gapOptions.none,g.onChangeGapOption=a,g.partsOfDay={morning:"preferMorning",afternoon:"preferAfternoon",evening:"preferEvening",none:"preferNone"},O.preferMornings?g.preferPartOfDay=g.partsOfDay.morning:O.preferAfternoons?g.preferPartOfDay=g.partsOfDay.afternoon:O.preferEvenings?g.preferPartOfDay=g.partsOfDay.evening:g.preferPartOfDay=g.partsOfDay.none,g.onChangePreferPartOfDay=c,g.selectedDayStartTimeJson=O.dayStartTime||y[0],g.selectedDayEndTimeJson=O.dayEndTime||y[y.length-1],g.dayStartTimes=y,g.dayEndTimes=y,g.onSelectDayStartTime=d,g.onSelectDayEndTime=f,g.isSelectedDayStartTime=h,g.isSelectedDayEndTime=p,g.noTimeConflicts=O.noTimeConflicts,g.onChangeNoTimeConflicts=l,r.registerSetStaleListener(function(e){g.scheduleIsStale=e})}return e.prototype=Object.create(o.prototype),{controller:["$state","$window","scheduleFactory",e],controllerAs:"dvm",templateUrl:"html/generate_schedules.partial.html"}}var i=e("../models/time"),o=e("./_base.controller");angular.module("scheduleBuilder").directive("sbGenerateSchedules",[n])},{"../models/time":17,"./_base.controller":1}],9:[function(e,t,r){"use strict";function n(e,t,r){function n(e){if(e in u){var n=t.defer();return n.resolve(u[e]),n.promise}return c.then(function(t){return t[e]}).then(function(t){return r.getCoursesQBySubjectAreaCode(t[0]).then(function(r){for(var n=t[1],i=0;i<r.length;i++)if(r[i].courseNumber===n){var o=r[i];return u[e]=o,o}})})}function i(e){if(e in u){var r=t.defer();return r.resolve(u[e]),r.promise}return a.then(function(t){return t[e]}).then(n)}var u={},a=e.get(o).then(function(e){return e.data}),c=e.get(s).then(function(e){return e.data});return{getCourseQBy1arySectionId:n,getCourseQBy2arySectionId:i}}var i="data/final/fa16/indices/{}.json",o=i.replace("{}","2ary-to-1ary-section-id"),s=i.replace("{}","1ary-section-id-to-subject-area");angular.module("scheduleBuilder").factory("reverseLookup",["$http","$q","courses",n])},{}],10:[function(e,t,r){function n(e,t,r,n){function d(){for(var e="",t=0;10>t;t++)e+=s[Math.floor(Math.random()*s.length)];return e}function f(){var e=r.get(u);return void 0===e&&(e=d(),r.put(u,e,{expires:re})),e}function h(){var e=r.getObject(a);return void 0===e&&ne&&(e=[ne],r.putObject(a,ie,{expires:re})),e}function p(){var e=l.replace("{}",ne),t=r.getObject(e);return void 0===t&&(t={}),t.showOptions=t.showOptions||!1,t.minimizeGaps=t.minimizeGaps||!1,t.maximizeGaps=t.maximizeGaps||!1,t.preferMornings=t.preferMornings||!1,t.preferAfternoons=t.preferAfternoons||!1,t.preferEvenings=t.preferEvenings||!1,t.dayStartTime=t.dayStartTime||null,t.dayEndTime=t.dayEndTime||null,t.noTimeConflicts=t.noTimeConflicts||!0,t}function g(){var e=l.replace("{}",ne);r.putObject(e,me)}function m(){var e=c.replace("{}",ne),t=r.getObject(e);t&&t.forEach(function(e){Y.push(n.getCourseQBy1arySectionId(e.id).then(function(t){t.sections.forEach(function(t){e.unselectedSections.indexOf(t.id)>=0&&(t.selected=!1)}),E(t)}))})}function y(){var e=[];for(var t in oe){var n=[],i=[];oe[t].sections.forEach(function(e){e.selected?n.push(e.id):i.push(e.id)}),e.push({id:t,selectedSections:n,unselectedSections:i})}var o=c.replace("{}",ne);r.putObject(o,e,{expires:re})}function v(){return H}function S(){H=!0,Z.forEach(function(e){e(H)})}function T(e){Z.push(e)}function O(){return K}function C(e){K=e,y(),X.forEach(function(e){e(K)})}function b(e){X.push(e)}function w(e){ee=e,te.forEach(function(t){t(e)})}function I(e){te.push(e)}function D(e){se=e,le.forEach(function(t){t(e)})}function M(e){le.push(e)}function A(){var e=[];for(var t in oe)e.push(oe[t]);return e}function x(t){if(oe.hasOwnProperty(t)){var r=e.defer();return r.resolve(oe[t]),r.promise}var i=n.getCourseQBy2arySectionId(t);return i.then(B),i}function E(e){return oe.hasOwnProperty(e.id)?!1:(oe[e.id]=e,e.add(),e.sections.forEach(function(e){ue[e.id]=e}),C(!0),ae.forEach(function(t){t(e)}),!0)}function B(e){var t=E(e);return t&&y(),t}function L(e){return oe.hasOwnProperty(e.id)?(delete oe[e.id],e.drop(),e.sections.forEach(function(e){delete ue[e.id]}),C(!0),ce.forEach(function(t){t(e)}),!0):!1}function j(e){var t=L(e);return t&&y(),t}function P(e){ae.push(e)}function z(e){ce.push(e)}function k(){return t(function(){if(K){de={},fe=[];var e=[];for(var t in oe){var r=oe[t];r.sectionTypes.forEach(function(t){e.push(r.getSectionsByType(t).filter(function(e){return e.selected}))})}var n=e.length,i=function(t,r){for(var s=0,u=e[r].length;u>s;s++){var a=t.slice(0);if(a.push(e[r][s]),r===n-1){var c=new o(ne,a);de[c.id]=c,fe.push(c.id)}else i(a,r+1)}};i([],0),he=fe.slice(),ge=0,C(!1),Q()}})}function _(t){var r=o.getUserIdFromId(t),i=r==ne;i||w(!0);var s=e.defer();if(de.hasOwnProperty(t))return s.resolve(de[t]),s.promise;if(t=o.normalizeId(t),de.hasOwnProperty(t))return s.resolve(de[t]),s.promise;var u=o.getSectionIdsFromId(t),a=[],c=[];return u.forEach(function(e){ue.hasOwnProperty(e)?a.push(ue[e]):c.push(n.getCourseQBy2arySectionId(e).then(function(t){if(i)if(K=!0,E(t))t.sections.forEach(function(t){t.id===e?(t.selected=!0,a.push(t)):t.selected=!1});else{t=oe[t.id];for(var r=0;r<t.sections.length;r++){var n=t.sections[r];if(n.id===e){a.push(n),n.selected=!0;break}}}else{t.add();for(var o=0;o<t.sections.length;o++)if(t.sections[o].id===e){a.push(t.sections[o]);break}}}))}),e.all(c).then(function(){var e=new o(r,a);return de[e.id]=e,i&&k().then(function(){q(),J()}),e})}function F(){return he[ge]}function $(){var e=he.length,t=(ge+e-1)%e;return he[t]}function G(){var e=(ge+1)%he.length;return he[e]}function N(){return{total:he.length,currentIdx:ge,firstScheduleId:he[0],prevScheduleId:$(),nextScheduleId:G()}}function Q(e){var t=N();t.scheduleListChanged=e,Object.keys(pe).forEach(function(e){pe[e](t)})}function R(e,t){pe[e]=t}function U(e){de.hasOwnProperty(e)||(e=o.normalizeId(e));var t=!1;ge=he.indexOf(e),0>ge&&(ge=0,t=!0),Q(t)}function V(){return angular.copy(me)}function W(e,t){me[e]=t,g()}function q(){var e=F();he=fe.slice(),Object.keys(ve).forEach(function(e){var t=ve[e];he=he.filter(function(e){return t(de[e])})});var t=!0;ge=he.indexOf(e),0>ge&&(ge=0),Q(t)}function J(){var e,t,r=F(),n=Object.keys(ye),i={};he.sort(function(r,o){return i.hasOwnProperty(r)||(e=de[r],t=0,n.forEach(function(r){me[r]&&(t+=ye[r](e))}),i[r]=t),i.hasOwnProperty(o)||(e=de[o],t=0,n.forEach(function(r){me[r]&&(t+=ye[r](e))}),i[o]=t),i[o]-i[r]});var o=!0;ge=he.indexOf(r),0>ge&&(ge=0),Q(o)}var H=!1,Y=[],Z=[],K=!1,X=[],ee=!1,te=[],re=function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e}(),ne=f(),ie=h(),oe={},se=null,ue={},ae=[],ce=[],le=[],de={},fe=[],he=[],pe={},ge=0,me=p(),ye={minimizeGaps:function(e){return-ye.maximizeGaps(e)},maximizeGaps:function(e){var t,r,n,i,o=0;for(var s in e.meetingsByDay){var u=e.meetingsByDay[s];if(u.length>=2)for(r=u[0].meeting.endTime.getTotalMinutes(),n=1;n<u.length;n++)t=u[n],r>0&&(i=t.meeting.startTime.getTotalMinutes()-r,o+=Math.max(0,i)/60),r=Math.max(r,t.meeting.endTime.getTotalMinutes())}return o},preferMornings:function(e){var t=0,r=0;for(var n in e.meetingsByDay)for(var o=e.meetingsByDay[n],s=0;s<o.length;s++)r++,o[s].meeting.endTime.compareTo(i.noon)<=0&&t++;return t/r},preferAfternoons:function(e){var t=0,r=0;for(var n in e.meetingsByDay)for(var o=e.meetingsByDay[n],s=0;s<o.length;s++)r++,o[s].meeting.startTime.compareTo(i.noon)>=0&&o[s].meeting.endTime.compareTo(i.fivePM)<=0&&t++;return t/r},preferEvenings:function(e){var t=0,r=0;for(var n in e.meetingsByDay)for(var o=e.meetingsByDay[n],s=0;s<o.length;s++)r++,o[s].meeting.startTime.compareTo(i.fivePM)>=0&&t++;return t/r}},ve={noTimeConflicts:function(e){if(!me.noTimeConflicts)return!0;var t,r,n;for(var i in e.meetingsByDay){var o=e.meetingsByDay[i];if(o.length>=2)for(r=o[0].meeting.endTime.getTotalMinutes(),n=1;n<o.length;n++){if(t=o[n],r>0&&t.meeting.startTime.getTotalMinutes()<r)return!1;r=Math.max(r,t.meeting.endTime.getTotalMinutes())}}return!0},dayStartTime:function(e){if(null==me.dayStartTime)return!0;for(var t in e.meetingsByDay){var r=e.meetingsByDay[t];if(r.length>0&&r[0].meeting.startTime.compareTo(me.dayStartTime)<0)return!1}return!0},dayEndTime:function(e){if(null==me.dayEndTime)return!0;for(var t in e.meetingsByDay)for(var r=e.meetingsByDay[t],n=0;n<r.length;n++)if(r[n].meeting.endTime.compareTo(me.dayEndTime)>0)return!1;return!0}};return m(),e.all(Y).then(function(){S()}),{isReady:v,registerSetReadyListener:T,isStale:O,setStale:C,registerSetStaleListener:b,setInDisplayMode:w,registerSetInDisplayModeListener:I,setCurrCourse:D,registerSetCurrCourseListener:M,getAllCourses:A,getCourseQById:x,addCourse:B,registerAddCourseListener:P,dropCourse:j,registerDropCourseListener:z,generateSchedulesQ:k,getScheduleQById:_,getCurrScheduleId:F,getPrevScheduleId:$,getNextScheduleId:G,getCurrScheduleListInfo:N,registerCurrScheduleListInfoChangeListener:R,setCurrentScheduleById:U,getSchedulingOptions:V,setSchedulingOption:W,filterSchedules:q,reorderSchedules:J}}var i=e("../models/time"),o=e("../models/schedule"),s="abcdefghijklmnopqrstuvwxyz0123456789",u="primaryUserId",a="allUserIds",c="{}.addedCourses",l="{}.schedulingOptions";angular.module("scheduleBuilder").factory("scheduleFactory",["$q","$timeout","$cookies","reverseLookup",n])},{"../models/schedule":15,"../models/time":17}],11:[function(e,t,r){function n(){function e(e,i,u){function a(e){var t=e.meeting.startTime.getTotalMinutes()-f;return t/h*d}function c(e){var t=e.meeting.getTotalMinutes();return t/h*d}function l(e){var t=o.colorCodes[e.course.color],r=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return"rgba("+r+","+n+","+i+","+g.sectionColorOpacity+")"}s.call(this,e,i);var g=this;g.hours=t,g.halfHours=r,g.days=n,g.sectionColorOpacity=p,g.currScheduleListInfo=u.getCurrScheduleListInfo(),g.showShareMessage=!1,g.getMeetingPosition=a,g.getMeetingHeight=c,g.getMeetingColor=l,u.registerCurrScheduleListInfoChangeListener("scheduleDisplay",function(e){g.currScheduleListInfo=e,e.scheduleListChanged&&g.goToState("schedule.viewSchedule",{scheduleId:e.firstScheduleId})})}for(var t=[],r=[],n=["Monday","Tuesday","Wednesday","Thursday","Friday"],u=8,a=24,c=a-u,l=u;a>l;l++)t.push(new i(l,0)),r.push(new i(l,0)),r.push(new i(l,30));var d=600,f=new i(u,0).getTotalMinutes(),h=new i(c,0).getTotalMinutes(),p="0.6";return e.prototype=Object.create(s.prototype),{scope:{schedule:"="},controller:["$state","$window","scheduleFactory",e],controllerAs:"vm",templateUrl:"html/schedule_display.partial.html"}}var i=e("../models/time"),o=e("../models/course"),s=e("./_base.controller");angular.module("scheduleBuilder").directive("sbScheduleDisplay",[n])},{"../models/course":13,"../models/time":17,"./_base.controller":1}],12:[function(e,t,r){function n(e,t,r,n,o){o.pageTrack("/schedule/{}".replace("{}",r.scheduleId)),i.call(this,e,t);var s=this,u=r.scheduleId;u&&(n.setCurrentScheduleById(r.scheduleId),n.getScheduleQById(r.scheduleId).then(function(e){s.selectedSchedule=e}))}var i=e("./_base.controller");n.prototype=Object.create(i.prototype),angular.module("scheduleBuilder").controller("ScheduleViewAndSelectCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",n])},{"./_base.controller":1}],13:[function(e,t,r){"use strict";function n(e){void 0===e.displayName&&console.log(e);var t=e.displayName.split(" ",2);this.department=t[0],this.courseNumber=t[1],this.title=e.title,this.instructors=e.instructors,this.id=e.id,this.units=e.units,this.sectionTypes=[],this.sections=e.sections.map(function(e){var t=new i(e,this);return this.sectionTypes.indexOf(t.type)<0&&this.sectionTypes.push(t.type),t},this),this.color=null,this.view=!1}var i=e("./section");n.colorCodes={red:"#f44336",pink:"#e91e63",purple:"#9c27b0","deep-purple":"#673ab7",indigo:"#3f51b5",blue:"#2196f3","light-blue":"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50","light-green":"#8bc34a",amber:"#ffc107",orange:"#ff9800","deep-orange":"#ff5722",brown:"#795548","blue-grey":"#607d8b"},n.unregisteredColors=Object.keys(n.colorCodes),n.registeredColors=[],n.courseColors={},n.getRegisteredColor=function(){var e=n.unregisteredColors.length;if(0==e)return n.registeredColors[Math.floor(Math.random()*n.registeredColors.length)];var t=Math.floor(Math.random()*e),r=n.unregisteredColors.splice(t,1)[0];return n.registeredColors.push(r),r},n.unRegisterColor=function(e){n.registeredColors.remove(e),n.unregisteredColors.push(e)},n.parse=function(e){return new n(e)},n.prototype.getSectionsByType=function(e){return this.sections.filter(function(t){return t.type===e})},n.prototype.add=function(){n.courseColors.hasOwnProperty(this.id)||(n.courseColors[this.id]=n.getRegisteredColor()),this.color=n.courseColors[this.id]},n.prototype.drop=function(){delete n.courseColors[this.id],n.unRegisterColor(this.color)},t.exports=n},{"./section":16}],14:[function(e,t,r){"use strict";function n(e,t,r){this.startTime=e,this.endTime=t,this.days=r}var i=e("./time.js");n.parse=function(e){if(null===e.startTime||null===e.endTime)return new n(null,null,e.days);var t=e.startTime.split(":"),r=new i(parseInt(t[0]),parseInt(t[1])),o=e.endTime.split(":"),s=new i(parseInt(o[0]),parseInt(o[1]));return new n(r,s,e.days)},n.dayAbrvExpansions={M:"Monday",T:"Tuesday",W:"Wednesday",R:"Thursday",F:"Friday"},n.dayAbrvs=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]],n.daysFromAbrvs=function(e){for(var t={Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1},r=0;r<e.length;r++)t[e[r]]=!0;return t},n.prototype.getTotalMinutes=function(){return this.endTime.getTotalMinutes()-this.startTime.getTotalMinutes()},n.prototype.toString=function(){var e="";return n.dayAbrvs.forEach(function(t){this.days[t[0]]&&(e+=t[1])},this),null==this.startTime||null==this.endTime?e:e+" "+this.startTime.toString()+"-"+this.endTime.toString()},t.exports=n},{"./time.js":17}],15:[function(e,t,r){"use strict";function n(e,t){this.courses={},this.meetingsByDay={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[]};var r=[];t.forEach(function(e){r.push(e.id);var t=e.course.id;this.courses.hasOwnProperty(t)||(this.courses[t]=[]),this.courses[t].push(e);for(var n in e.meeting.days)e.meeting.days[n]&&this.meetingsByDay[n].push(e)},this);for(var i in this.meetingsByDay)this.meetingsByDay[i].sort(function(e,t){return e.meeting.startTime.compareTo(t.meeting.startTime)});this.id=n.generateId([e].concat(r)),this.selected=!0}n.generateId=function(e){var t=e.shift();return e=e.map(function(e){return parseInt(e)}),e.sort(function(e,t){return e-t}),e.unshift(t),e.join(".")},n.normalizeId=function(e){return null===e?null:n.generateId(e.split("."))},n.getUserIdFromId=function(e){return e.split(".")[0]},n.getSectionIdsFromId=function(e){return e.split(".").slice(1).map(function(e){return parseInt(e)})},t.exports=n},{}],16:[function(e,t,r){"use strict";function n(e,t){angular.extend(this,e),this.location=this.location.description,this.meeting=i.parse(this.time),delete this.time,this.course=t,this.selected=!0}var i=e("./meeting");t.exports=n},{"./meeting":14}],17:[function(e,t,r){"use strict";function n(e,t){(0>e||e>24)&&console.error("invalid hours",e),this.hours=e,(0>t||t>59)&&console.error("invalid minutes",t),this.minutes=t}n.parse=function(e){return("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),new n(e.hours,e.minutes)},n.noon=new n(12,0),n.fivePM=new n(17,0),n.prototype.add=function(e){return new n(this.hours+e.hours,this.minutes+e.minutes)},n.prototype.compareTo=function(e){return this.getTotalMinutes()-e.getTotalMinutes()},n.prototype.toString=function(){var e=this.hours,t="AM";e>=12&&(t="PM",e>12&&(e-=12));var r=e.toString();return 0!=this.minutes&&(r+=":"+this.minutes.toString()),r+t},n.prototype.getTotalMinutes=function(){return 60*this.hours+this.minutes},t.exports=n},{}]},{},[2]);