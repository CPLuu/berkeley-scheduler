!function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t,n){function r(t,n,r){return"schedule.viewSchedule"===t?void i(n,r):void e.go(t,n,r)}function o(e){t.open(e,"_blank")}function i(t,r){var o=n.getSchedulingOptions();t.noTimeConflicts=o.noTimeConflicts,e.go("schedule.viewSchedule",t,r)}var s=this;s.goToState=r,s.goToExternal=o}t.exports=r},{}],2:[function(e,t,n){!function(){"use strict";angular.module("berkeleyScheduler",["ui.router","ngSanitize","ngCookies","ngMaterial","angulartics","angulartics.google.analytics"]),e("./config"),e("./courses.factory"),e("./reverseLookup.factory"),e("./schedule.factory"),e("./_base.controller"),e("./courseFind.controller"),e("./exportToCalendarDialog.controller"),e("./generatingSchedules.controller"),e("./mobileUnoptimizedDialog.controller"),e("./viewCourse.controller"),e("./viewSchedule.controller"),e("./courseDisplay.directive"),e("./generateSchedules.directive"),e("./scheduleDisplay.directive"),e("./run")}()},{"./_base.controller":1,"./config":3,"./courseDisplay.directive":4,"./courseFind.controller":5,"./courses.factory":6,"./exportToCalendarDialog.controller":7,"./generateSchedules.directive":8,"./generatingSchedules.controller":9,"./mobileUnoptimizedDialog.controller":10,"./reverseLookup.factory":11,"./run":12,"./schedule.factory":13,"./scheduleDisplay.directive":14,"./viewCourse.controller":15,"./viewSchedule.controller":16}],3:[function(e,t,n){angular.module("berkeleyScheduler").config(["$compileProvider","$stateProvider","$urlRouterProvider","$mdThemingProvider","$mdIconProvider",function(e,t,n,r,o){e.debugInfoEnabled(!1),t.state("schedule",{url:"/schedule",templateUrl:"html/schedule.html",controller:"CourseFindCtrl",controllerAs:"vm"}).state("schedule.viewCourse",{url:"/course/{id}",templateUrl:"html/view_course.partial.html",controller:"ViewCourseCtrl",controllerAs:"vm"}).state("schedule.generatingSchedules",{url:"/generate?scheduleGroupId&startScheduleId",templateUrl:"html/generating_schedules.partial.html",controller:"GeneratingSchedulesCtrl",controllerAs:"vm"}).state("schedule.viewSchedule",{url:"/{scheduleId}?noTimeConflicts",templateUrl:"html/view_schedule.partial.html",controller:"ViewScheduleCtrl",controllerAs:"vm"}),n.otherwise("schedule");var i={50:"#0073e1",100:"#0066c8",200:"#0059ae",300:"#004c95",400:"#003f7b",500:"#003262",600:"#002548",700:"#00182f",800:"#000b15",900:"#000000",A100:"#0080fb",A200:"#158dff",A400:"#2f99ff",A700:"#000000"};r.definePalette("berkeley-primary",i);var s={50:"#785301",100:"#916501",200:"#ab7601",300:"#c48802",400:"#dd9902",500:"#f6ab02",600:"#fdbd2e",700:"#fdc548",800:"#fecd61",900:"#fed57a",A100:"#fdbd2e",A200:"#FDB515",A400:"#f6ab02",A700:"#fedd93"};r.definePalette("berkeley-accent",s),r.theme("default").primaryPalette("berkeley-primary").accentPalette("berkeley-accent"),o.defaultViewBoxSize(48).defaultIconSet("svg/final/sprite.defs.svg")}])},{}],4:[function(e,t,n){function r(){function e(e,t,n,r){function i(){c.selectAllSections?n.course.sections.forEach(function(e){e.selected=!0}):n.course.sections.forEach(function(e){e.selected=!1}),s()}function s(){r.setStale(!0)}function u(e){return c.sectionTypeMapping[e.type]}o.call(this,e,t,r);var c=this;c.sectionTypeMapping={LEC:0,DIS:3,GRP:5,LAB:7},c.selectAllSections=!1,c.onChangeSelectAllSections=i,c.setSchedulesStale=s,c.extractSectionTypeMapping=u}return e.prototype=Object.create(o.prototype),{scope:{course:"="},controller:["$state","$window","$scope","scheduleFactory",e],controllerAs:"vm",templateUrl:"html/course_display.partial.html"}}var o=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsCourseDisplay",[r])},{"./_base.controller":1}],5:[function(e,t,n){function r(e,t,n,r,i){function s(e){return e?v.subjectAreasList.filter(u(e)):v.subjectAreasList}function u(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.code).indexOf(e)?!0:0===angular.lowercase(t.description).indexOf(e)?!0:t.abbreviations.some(function(t){return 0===angular.lowercase(t).indexOf(e)})}}function c(e){return e?void n.getCoursesQBySubjectAreaCode(e.code).then(function(e){v.coursesList=e,v.courseIsDisabled=!1}):(v.courseIsDisabled=!0,void(v.coursesList=[]))}function a(e){return e?v.coursesList.filter(l(e)):v.coursesList}function l(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.courseNumber).indexOf(e)||0===angular.lowercase(t.title).indexOf(e)}}function d(e){e&&m(e)}function h(e){var t=e.courseNumber;return parseInt(S.exec(t)[2])}function f(e){var t=e.courseNumber;return S.exec(t)[3]}function p(e){var t=e.courseNumber;return S.exec(t)[1]}function g(){r.setStale(!0)}function m(e){r.addCourse(e)}function y(e){r.dropCourse(e)}i.pageTrack("/schedule"),o.call(this,e,t,r);var v=this;v.scheduleIsReady=r.isReady(),v.subjectAreaIsDisabled=!1,v.courseIsDisabled=!0,v.selectedCourse=null,v.coursesList=[],v.subjectAreasList=[],v.searchSubjectArea=s,v.selectSubjectArea=c,v.searchCourse=a,v.selectCourse=d,v.extractCourseNumberNumber=h,v.extractCourseNumberSuffix=f,v.extractCourseNumberPrefix=p,v.addedCoursesList=r.getAllCourses(),v.setSchedulesStale=g,v.addCourse=m,v.dropCourse=y,v.generateSchedulesQ=r.generateSchedulesQ,n.getSubjectAreasQ().then(function(e){v.subjectAreasList=e}),r.registerSetReadyListener(function(e){v.scheduleIsReady=e}),r.registerAddCourseListener(function(e){v.addedCoursesList.push(e),v.scheduleIsReady&&v.goToState("schedule.viewCourse",{id:e.id})}),r.registerDropCourseListener(function(e){v.addedCoursesList.remove(e),0!=v.addedCoursesList.length?v.goToState("schedule.viewCourse",{id:v.addedCoursesList[v.addedCoursesList.length-1].id}):v.goToState("schedule")});var S=/^([a-zA-Z]*)(\d+)([a-zA-Z]*)/}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("CourseFindCtrl",["$state","$window","courses","scheduleFactory","$analytics",r])},{"./_base.controller":1}],6:[function(e,t,n){"use strict";function r(e,t){function n(){return l}function r(t){if(t in a)return a[t];var n=c(t),r=u.replace("{}",n),i=e.get(r).then(function(e){var t=e.data;return Object.keys(t).map(function(e){return o.parse(t[e])})},function(){return[]});return a[t]=i,i}function c(e){return e.replace(/\W/g,"")}var a={},l=t.all([e.get(i).then(function(e){return e.data}),e.get(s).then(function(e){return e.data},function(){return{}})]).then(function(e){var t=e[0].subjectAreas,n=e[1];return Object.keys(t).map(function(e){return{code:e,description:t[e],abbreviations:e in n?n[e]:[]}})});return{getSubjectAreasQ:n,getCoursesQBySubjectAreaCode:r}}var o=e("../models/course"),i="data/final/departments.json",s="data/final/abbreviations.json",u="data/final/fa16/classes/{}.json";angular.module("berkeleyScheduler").factory("courses",["$http","$q",r])},{"../models/course":17}],7:[function(e,t,n){function r(e,t,n,r,i){function s(){n.hide()}o.call(this,e,t,r);var u=this;u.schedule=i,u.close=s,console.log(i)}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("ExportToCalendarDialogCtrl",["$state","$window","$mdDialog","scheduleFactory","schedule",r])},{"./_base.controller":1}],8:[function(e,t,n){function r(){function e(e,t,n){function r(){n.setSchedulingOption("preferMornings",!1,!1),n.setSchedulingOption("preferAfternoons",!1,!1),n.setSchedulingOption("preferEvenings",!1,!1),n.setSchedulingOption("minimizeGaps",!1,!1),n.setSchedulingOption("maximizeGaps",!1,!1),n.setSchedulingOption("preferNoTimeConflicts",!1,!1),n.setSchedulingOption(m.selectedSortingOption,!0,!0),s()}function s(){var e=m.scheduleGenerationStatus.status;"done"!==e&&"failed"!==e||n.filterAndReorderSchedules()}function u(){var e=n.getCurrScheduleId();void 0===e&&c(),m.goToState("schedule.viewSchedule",{scheduleId:e})}function c(){m.goToState("schedule.generatingSchedules",{scheduleGroupId:n.getCurrentScheduleGroupId()})}function a(e){e&&l(!1),m.showSavedSchedules=e,n.setSchedulingOption("showSavedSchedules",m.showSavedSchedules)}function l(e){e&&a(!1),m.showOptions=e,n.setSchedulingOption("showOptions",m.showOptions)}function d(){m.disablePreferNoTimeConflicts=m.noTimeConflicts,n.setSchedulingOption("noTimeConflicts",m.noTimeConflicts),s()}function h(){for(var e=v.slice(),t=o.parse(m.selectedDayStartTimeJson);e.length>0&&e[0].compareTo(t)<0;)e.shift();m.dayEndTimes=e,n.setSchedulingOption("dayStartTime",t),s()}function f(){for(var e=v.slice(),t=o.parse(m.selectedDayEndTimeJson);e.length>0&&e[e.length-1].compareTo(t)>0;)e.pop();m.dayStartTimes=e,n.setSchedulingOption("dayEndTime",t),s()}function p(e){var t=o.parse(m.selectedDayStartTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}function g(e){var t=o.parse(m.selectedDayEndTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}i.call(this,e,t,n);for(var m=this,y=[],v=[],S=8,T=24,w=S;T>w;w++)y.push(new o(w,0)),v.push(new o(w,0)),v.push(new o(w,30));y.push(new o(w,0)),v.push(new o(w,0));var b=n.getSchedulingOptions();m.scheduleGenerationStatus=n.getScheduleGenerationStatus(),m.showSavedSchedules=b.showSavedSchedules,m.showOptions=b.showOptions,m.toggleSavedSchedules=a,m.toggleOptions=l,m.viewSchedules=u,m.generateAndViewSchedules=c,m.sortingOptions={preferMornings:"preferMornings",preferAfternoons:"preferAfternoons",preferEvenings:"preferEvenings",minimizeGaps:"minimizeGaps",maximizeGaps:"maximizeGaps",minimizeNumberOfDays:"minimizeNumberOfDays",maximizeNumberOfDays:"maximizeNumberOfDays",preferNoTimeConflicts:"preferNoTimeConflicts",noPreference:"noPreference"},m.selectedSortingOption=m.sortingOptions.noPreference;for(var C in m.sortingOptions)if(b[C]){m.selectedSortingOption=C;break}m.onChangeSortingOption=r,m.selectedDayStartTimeJson=b.dayStartTime||v[0],m.selectedDayEndTimeJson=b.dayEndTime||v[v.length-1],m.dayStartTimes=v,m.dayEndTimes=v,m.onSelectDayStartTime=h,m.onSelectDayEndTime=f,m.isSelectedDayStartTime=p,m.isSelectedDayEndTime=g,m.noTimeConflicts=b.noTimeConflicts,m.onChangeNoTimeConflicts=d,m.savedSchedules=n.getSavedSchedules(),m.dropSavedSchedule=function(e,t){e.stopPropagation(),n.dropSavedSchedule(t)},n.registerScheduleGenerationStatusListener("generateSchedules",function(t){m.scheduleGenerationStatus=t,"stale"===t.status&&e.includes("schedule.viewSchedule")&&m.generateAndViewSchedules()}),n.registerAddSavedScheduleListener(function(e){m.savedSchedules.push(e)}),n.registerDropSavedScheduleIdListener(function(e){m.savedSchedules.remove(e)})}return e.prototype=Object.create(i.prototype),{controller:["$state","$window","scheduleFactory",e],controllerAs:"dvm",templateUrl:"html/generate_schedules.partial.html"}}var o=e("../models/time"),i=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsGenerateSchedules",[r])},{"../models/time":25,"./_base.controller":1}],9:[function(e,t,n){function r(e,t,n,r,i,s,u){u.pageTrack("/schedule/generate?{}".replace("{}",n(r))),o.call(this,e,t,s);var c=this;c.scheduleGenerationStatus=s.getScheduleGenerationStatus(),s.registerScheduleGenerationStatusListener("generatingSchedules",function(t){c.scheduleGenerationStatus=t,"done"===c.scheduleGenerationStatus.status&&e.includes("schedule.generatingSchedules")&&c.goToState("schedule.viewSchedule",{scheduleId:d||s.getCurrScheduleId()})});var a=i.defer(),l=r.scheduleGroupId,d=r.startScheduleId;l?a.resolve(s.setCurrentScheduleGroupById(l)):d&&a.resolve(s.setCurrentScheduleGroupByScheduleIdQ(d)),a.promise.then(function(){s.generateSchedulesQ().then(function(){s.filterAndReorderSchedules()})})}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("GeneratingSchedulesCtrl",["$state","$window","$httpParamSerializer","$stateParams","$q","scheduleFactory","$analytics",r])},{"./_base.controller":1}],10:[function(e,t,n){function r(e,t,n,r){function i(){r.setPreference("showMobUnoptDialog",!s.doNotShowMobUnoptDialog),n.hide()}o.call(this,e,t,r);var s=this;s.doNotShowMobUnoptDialog=!1,s.close=i}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("MobileUnoptimizedDialogCtrl",["$state","$window","$mdDialog","scheduleFactory",r])},{"./_base.controller":1}],11:[function(e,t,n){"use strict";function r(e,t,n){function r(e){if(e in u){var r=t.defer();return r.resolve(u[e]),r.promise}return a.then(function(t){return t[e]}).then(function(t){return n.getCoursesQBySubjectAreaCode(t[0]).then(function(n){for(var r=t[1],o=0;o<n.length;o++)if(n[o].courseNumber===r){var i=n[o];return u[e]=i,i}})})}function o(e){if(e in u){var n=t.defer();return n.resolve(u[e]),n.promise}return c.then(function(t){return t[e]}).then(r)}var u={},c=e.get(i).then(function(e){return e.data}),a=e.get(s).then(function(e){return e.data});return{getCourseQBy1arySectionId:r,getCourseQBy2arySectionId:o}}var o="data/final/fa16/indices/{}.json",i=o.replace("{}","2ary-to-1ary-section-id"),s=o.replace("{}","1ary-section-id-to-subject-area");angular.module("berkeleyScheduler").factory("reverseLookup",["$http","$q","courses",r])},{}],12:[function(e,t,n){angular.module("berkeleyScheduler").run(["$window","$state","$rootScope","$mdDialog","$mdMedia","$templateRequest","scheduleFactory",function(e,t,n,r,o,i,s){function u(e){return Math.max(e.offsetHeight,e.clientHeight)}function c(){l&&h&&(a=u(document.body),d=u(l),d>a?h.style["min-height"]=d:h.style["min-height"]=null)}n.$state=t;var a=null,l=null,d=null,h=null;n.$on("$viewContentLoaded",function(){l=l||document.getElementById("left-pane"),h=h||document.getElementById("right-pane"),c()}),e.addEventListener("resize",c);var f=s.getPreferences().showMobUnoptDialog;f&&o("xs")&&r.show({templateUrl:"html/mobile_unoptimized.dialog.html",controller:"MobileUnoptimizedDialogCtrl",controllerAs:"vm",parent:angular.element(document.body),clickOutsideToClose:!0}),i("svg/final/sprite.defs.svg")}])},{}],13:[function(e,t,n){function r(e,t,n,r){function m(e,t){for(var n="",r=0;t>r;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function y(){var e=n.get(l);return void 0===e&&(e=m(c,10),n.put(l,e,{expires:Ie})),e}function v(){var e=n.getObject(d);return void 0===e&&Fe&&(e=[Fe],n.putObject(d,Ae,{expires:Ie})),e}function S(){var e=h.replace("{}",Fe),t=n.getObject(e)||{};return void 0===t.showMobUnoptDialog&&(t.showMobUnoptDialog=!0),t}function T(){var e=h.replace("{}",Fe);n.putObject(e,Me)}function w(){var e=g.replace("{}",Fe),t=n.getObject(e)||{};if(t.showSavedSchedules=t.showSavedSchedules||!1,t.showOptions=t.showOptions||!1,t.minimizeGaps=t.minimizeGaps||!1,t.maximizeGaps=t.maximizeGaps||!1,t.minimizeNumberOfDays=t.minimizeNumberOfDays||!1,t.maximizeNumberOfDays=t.maximizeNumberOfDays||!1,t.preferMornings=t.preferMornings||!1,t.preferAfternoons=t.preferAfternoons||!1,t.preferEvenings=t.preferEvenings||!1,t.preferNoTimeConflicts=t.preferNoTimeConflicts||!1,t.dayStartTime){var r=t.dayStartTime;t.dayStartTime=new o(r.hours,r.minutes)}else t.dayStartTime=null;if(t.dayEndTime){var r=t.dayEndTime;t.dayEndTime=new o(r.hours,r.minutes)}else t.dayEndTime=null;return void 0===t.noTimeConflicts&&(t.noTimeConflicts=!0),t.showFinalsSchedule=t.showFinalsSchedule||!1,t}function b(){var e=g.replace("{}",Fe);n.putObject(e,Ve)}function C(){var e=f.replace("{}",Fe),t=n.getObject(e);t&&t.forEach(function(e){be.push(r.getCourseQBy1arySectionId(e.id).then(function(t){t.selected=void 0===e.selected||e.selected,t.sections.forEach(function(t){e.unselectedSections.indexOf(t.id)>=0&&(t.selected=!1)}),k(t)}))})}function I(){var e=[];for(var t in Oe){var r=[],o=[];Oe[t].sections.forEach(function(e){e.selected?r.push(e.id):o.push(e.id)}),e.push({id:t,selected:Oe[t].selected,selectedSections:r,unselectedSections:o})}var i=f.replace("{}",Fe);n.putObject(i,e,{expires:Ie})}function F(){var e=p.replace("{}",Fe),t=n.getObject(e);t&&t.forEach(function(e){J(e).then(function(e){ge(e)})})}function A(){var e=p.replace("{}",Fe);n.putObject(e,Pe.map(function(e){return e.id}),{expires:Ie})}function M(){return angular.copy(Me)}function O(e,t){Me[e]=t,T()}function x(){return we}function E(){we=!0,Ce.forEach(function(e){e(we)})}function D(e){Ce.push(e)}function P(){return Re=Re||new u.Stale,"stale"===Re.status}function B(e){void 0===e&&(e=!0),e&&(Object.keys(Ge).forEach(function(e){Ge[e]=!0}),K(new u.Stale)),I()}function N(){var e=[];for(var t in Oe)e.push(Oe[t]);return e}function j(t){if(Oe.hasOwnProperty(t))return e.when(Oe[t]);var n=r.getCourseQBy2arySectionId(t);return n.then(L),n}function k(e){return Oe.hasOwnProperty(e.id)?!1:(Oe[e.id]=e,e.add(),e.sections.forEach(function(e){xe[e.id]=e}),B(!0),Ee.forEach(function(t){t(e)}),!0)}function L(e){var t=k(e);return t&&(e.selected=!0,I()),t}function G(e){return Oe.hasOwnProperty(e.id)?(delete Oe[e.id],e.drop(),e.sections.forEach(function(e){delete xe[e.id]}),B(!0),De.forEach(function(t){t(e)}),!0):!1}function $(e){var t=G(e);return t&&I(),t}function R(e){Ee.push(e)}function _(e){De.push(e)}function z(){He=Le.map(function(e){return ke[e].length}).reduce(function(e,t){return e+t},0)}function U(){return null===$e&&($e=t(function(){function n(e){c+=e,K(new u.Generating(c,s))}function r(){return t(function(){if(Ge[o])return $e=null,i.reject(),void delete Ge[o];for(var e=0;l>e;){if(null==d)return c+=e,$e=null,i.resolve(),void delete Ge[o];h=d.getTimeFootprint(),ke.hasOwnProperty(h)||(ke[h]=[]),ke[h].push(d.id),e++,d=je.nextSchedule()}return n(e),r()})}var o=m(a,4);Ge[o]=!1,ke={};var i=e.defer(),s=je.getTotalNumSchedules(),c=0,l=128,d=je.nextSchedule(),h=null;return B(!1),n(0),r(),i.promise.then(function(){Le=Object.keys(ke),z(),ce(!0)})}).then(function(){$e=null})),$e}function W(){if(!P()){Le=Object.keys(ke),K(new u.FilteringAndReordering(He,!0)),Object.keys(Je).forEach(function(e){if(Ve[e]){var t=Je[e];Le=Le.filter(function(e){return t(e)})}}),K(new u.FilteringAndReordering(He,!1));var e,t=Object.keys(qe).filter(function(e){return Ve[e]}),n={};Le.sort(function(r,o){return n.hasOwnProperty(r)||(e=0,t.forEach(function(t){e+=qe[t](r)}),n[r]=e),n.hasOwnProperty(o)||(e=0,t.forEach(function(t){e+=qe[t](o)}),n[o]=e),n[o]-n[r]}),Ue=0,We=0,Qe=0,z(),He>0?K(new u.Done(He)):(K(new u.Failed),Q()),ce(!0)}}function Q(){if(je&&je.getTotalNumSchedules()<=0){var e=je.courses;if(e.length<=0)return void K(new u.Failed("No classes were selected."));for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.sectionTypes.length;r++){var o=n.getSectionsByType(n.sectionTypes[r]).filter(function(e){return e.selected});if(o.length<=0)return void K(new u.Failed("No sections of type "+n.sectionTypes[r]+" were selected for "+n.getName()+"."))}}var i=Object.keys(ke);return i=i.filter(function(e){return Je.noTimeConflicts(e)}),i.length<=0?void K(new u.Failed("Schedules without time conflicts could not be found.")):(i=i.filter(function(e){return Je.dayStartTime(e)}).filter(function(e){return Je.dayEndTime(e)}),void(i.length<=0&&K(new u.Failed("No schedules were found with all classes within the selected start and end time of day. Change your Scheduling Options, add more sections to your existing classes, or check for a different set of classes. "))))}function H(e,t){(t||null===je||e.id!==je.id)&&(je=e)}function V(){if(null===je||P()){var e=Object.keys(Oe).map(function(e){return Oe[e]}).filter(function(e){return e.selected});H(new s(Fe,e),!0)}return je.id}function q(t){if(null===je||je.id!==s.normalizeId(t)){var n=s.getUserIdFromId(t),o=s.getCourseIdsFromId(t),i=[],u=[];return o.forEach(function(e){var t=Oe[e];t?i.push(t):u.push(r.getCourseQBy1arySectionId(e).then(function(e){i.push(e),L(e)}))}),e.all(u).then(function(){Object.keys(Oe).forEach(function(e){Oe[e].selected=o.indexOf(parseInt(e))>=0}),H(new s(n,i),!1)})}}function J(t){var n=le(t);if(null!==n)return e.when(n);var o=i.getUserIdFromId(t),s=i.getSectionIdsFromId(t),u=[],c=[];return s.forEach(function(e){if(xe.hasOwnProperty(e)){var t=xe[e];u.push(t)}else c.push(r.getCourseQBy2arySectionId(e).then(function(t){for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(r.id===e){u.push(r);break}}}))}),e.all(c).then(function(){return new i(o,u)})}function Y(t){if(null!==le(t))return e.when();var n=i.getUserIdFromId(t),o=i.getSectionIdsFromId(t),u=[],c=[],a=[];return o.forEach(function(e){if(xe.hasOwnProperty(e)){var t=xe[e];c.push(t),u.push(t.course.id)}else a.push(r.getCourseQBy2arySectionId(e).then(function(t){if(B(!0),u.push(t.id),k(t))t.sections.forEach(function(t){t.id===e?(t.selected=!0,c.push(t)):t.selected=!1});else{t=Oe[t.id];for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(r.id===e){c.push(r),r.selected=!0;break}}}}))}),e.all(a).then(function(){var e=[];Object.keys(Oe).forEach(function(t){if(u.indexOf(parseInt(t))>=0){var n=Oe[t];n.selected=!0,e.push(n)}else Oe[t].selected=!1}),H(new s(n,e),!1)})}function K(e){Re=e,Object.keys(_e).forEach(function(t){_e[t](e)})}function X(){return Re||new u.Stale}function Z(e,t){_e[e]=t}function ee(e){return ke[Le[e]]||[]}function te(e,t){return ee(e)[t]}function ne(){return te(Ue,We)}function re(){var e=Le.length;if(0>=e)return null;for(var t=Ue,n=We-1;0>n;)t=(Ue+e-1)%e,n=ee(t).length-1;return te(t,n)}function oe(){var e=Le.length;if(0>=e)return null;var t=(Ue+e-1)%e;return te(t,0)}function ie(){var e=Le.length;if(0>=e)return null;for(var t=Ue,n=We+1;n>=ee(t).length;)t=(Ue+1)%e,n=0;return te(t,n)}function se(){var e=Le.length;if(0>=e)return null;var t=(Ue+1)%e;return te(t,0)}function ue(){return{total:He,currentIdx:Qe,firstScheduleId:te(0,0),prevScheduleId:re(),prevFpFirstScheduleId:oe(),nextScheduleId:ie(),nextFpFirstScheduleId:se()}}function ce(e){var t=ue();t.scheduleListChanged=e,Object.keys(ze).forEach(function(e){ze[e](t)})}function ae(e,t){ze[e]=t}function le(e){return je?je.getScheduleById(e):null}function de(e){if(P())return null;var t=le(e);if(null===t)return t;var n=t.getTimeFootprint();for(Qe=0,Ue=0;Ue<Le.length;Ue++){var r=ee(Ue);if(Le[Ue]===n){We=r.indexOf(e),Qe+=We;break}Qe+=r.length}return Qe%=He,t}function he(){return angular.copy(Ve)}function fe(e,t,n){Ve.hasOwnProperty(e)&&(Ve[e]=t),(void 0===n||n)&&b()}function pe(){return Pe.slice()}function ge(e){for(var t=0;t<Pe.length;t++)if(Pe[t].id===e.id)return!1;return Pe.push(e),Be.forEach(function(t){t(e)}),!0}function me(e){var t=ge(e);return t&&A(),t}function ye(e){Be.push(e)}function ve(e){for(var t=0;t<Pe.length;t++)if(Pe[t].id===e.id)return Pe.splice(t,1),Ne.forEach(function(t){t(e)}),!0;return!1}function Se(e){var t=ve(e);return t&&A(),t}function Te(e){Ne.push(e)}var we=!1,be=[],Ce=[],Ie=function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e}(),Fe=y(),Ae=v(),Me=S(),Oe={},xe={},Ee=[],De=[],Pe=[],Be=[],Ne=[],je=null,ke={},Le=[],Ge={},$e=null,Re=u.Stale(),_e={},ze={},Ue=0,We=0,Qe=0,He=0,Ve=w(),qe={minimizeGaps:function(e){return-qe.maximizeGaps(e)},maximizeGaps:function(e){var t,n,r,o,s=i.timeFootprints[e],u=0;for(var c in s){var a=s[c];if(a.length>=2)for(n=a[0].meetings[0].endTime.getTotalMinutes(),r=1;r<a.length;r++)t=a[r],n>0&&(o=t.meetings[0].startTime.getTotalMinutes()-n,u+=Math.max(0,o)/60),n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}return u},minimizeNumberOfDays:function(e){return-qe.maximizeNumberOfDays(e)},maximizeNumberOfDays:function(e){var t=i.timeFootprints[e],n=0;for(var r in t)t[r].length>0&&(n+=1);return n},preferMornings:function(e){var t=i.timeFootprints[e],n=0,r=0;for(var s in t)for(var u=t[s],c=0;c<u.length;c++)r++,u[c].meetings[0].endTime.compareTo(o.noon)<=0&&n++;return n/r},preferAfternoons:function(e){var t=i.timeFootprints[e],n=0,r=0;for(var s in t)for(var u=t[s],c=0;c<u.length;c++)r++,u[c].meetings[0].startTime.compareTo(o.noon)>=0&&u[c].meetings[0].endTime.compareTo(o.fivePM)<=0&&n++;return n/r},preferEvenings:function(e){var t=i.timeFootprints[e],n=0,r=0;for(var s in t)for(var u=t[s],c=0;c<u.length;c++)r++,u[c].meetings[0].startTime.compareTo(o.fivePM)>=0&&n++;return n/r},preferNoTimeConflicts:function(e){var t,n,r,o=i.timeFootprints[e],s=0,u=0;for(var c in o){var a=o[c];if(u+=a.length,a.length>=2)for(n=a[0].meetings[0].endTime.getTotalMinutes(),r=1;r<a.length;r++)t=a[r],n>0&&t.meetings[0].startTime.getTotalMinutes()<n&&s++,n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}return-(s/u)}},Je={noTimeConflicts:function(e){if(!Ve.noTimeConflicts)return!0;var t,n,r,o=i.timeFootprints[e];for(var s in o){var u=o[s];if(u.length>=2)for(n=u[0].meetings[0].endTime.getTotalMinutes(),r=1;r<u.length;r++){if(t=u[r],n>0&&t.meetings[0].startTime.getTotalMinutes()<n)return!1;n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}}return!0},dayStartTime:function(e){if(null==Ve.dayStartTime)return!0;var t=i.timeFootprints[e];for(var n in t){var r=t[n];if(r.length>0&&r[0].meetings[0].startTime.compareTo(Ve.dayStartTime)<0)return!1}return!0},dayEndTime:function(e){if(null==Ve.dayEndTime)return!0;var t=i.timeFootprints[e];for(var n in t)for(var r=t[n],o=0;o<r.length;o++)if(r[o].meetings[0].endTime.compareTo(Ve.dayEndTime)>0)return!1;return!0}};return C(),F(),e.all(be).then(function(){E()}),{getPreferences:M,setPreference:O,isReady:x,registerSetReadyListener:D,setStale:B,getAllCourses:N,getCourseQById:j,addCourse:L,registerAddCourseListener:R,dropCourse:$,registerDropCourseListener:_,generateSchedulesQ:U,getCurrentScheduleGroupId:V,setCurrentScheduleGroupById:q,setCurrentScheduleGroupByScheduleIdQ:Y,getScheduleQById:J,getScheduleByIdFromCurrentScheduleGroup:le,getCurrScheduleId:ne,getScheduleGenerationStatus:X,registerScheduleGenerationStatusListener:Z,getCurrScheduleListInfo:ue,registerCurrScheduleListInfoChangeListener:ae,setCurrentScheduleById:de,getSchedulingOptions:he,setSchedulingOption:fe,filterAndReorderSchedules:W,getSavedSchedules:pe,addSavedSchedule:me,dropSavedSchedule:Se,registerAddSavedScheduleListener:ye,registerDropSavedScheduleIdListener:Te}}var o=e("../models/time"),i=e("../models/schedule"),s=e("../models/scheduleGroup"),u=e("../models/scheduleGenerationStatus"),c="abcdefghijklmnopqrstuvwxyz0123456789",a=c,l="primaryUserId",d="allUserIds",h="{}.preferences",f="{}.addedCourses",p="{}.savedScheduleIds",g="{}.schedulingOptions";angular.module("berkeleyScheduler").factory("scheduleFactory",["$q","$timeout","$cookies","reverseLookup",r])},{"../models/schedule":20,"../models/scheduleGenerationStatus":21,"../models/scheduleGroup":22,"../models/time":25}],14:[function(e,t,n){function r(e){function t(e,t,i,s){function d(){N.showFinalsSchedule=!N.showFinalsSchedule,s.setSchedulingOption("showFinalsSchedule",N.showFinalsSchedule)}function h(e,t){var n=[],r=[[],[],[],[]];for(var o in e){var i=e[o][0].course.finalMeeting,s=i;if(s.meeting&&s.meeting.days[t]){switch(i.meeting.startTime.hours){case 8:r[0].push(s);break;case 11:r[1].push(s);break;case 15:r[2].push(s);break;case 19:r[3].push(s)}n.push(s)}}return r.forEach(function(e){for(var t=e.length,n=0;t>n;n++)e[n].slotIdx=n,e[n].slotLength=t}),n}function f(e){return{top:w(e),left:b(e),height:C(e),width:I(e),"background-color":F(e)}}function p(e){return{top:w(e),height:C(),"background-color":F(e)}}function w(e){switch(e.meeting.startTime.hours){case 8:return 0;case 11:return.25*g;case 15:return.5*g;case 19:return.75*g}}function b(e){return e.slotIdx/e.slotLength*100+"%"}function C(){return g/4}function I(e){return 1/e.slotLength*100+"%"}function F(e){return o.colorCodes[e.course.color]}function A(e){return{top:O(e),left:x(e),height:E(e),width:D(e),"background-color":P(e)}}function M(e){return{top:O(e),height:E(e),"background-color":P(e)}}function O(e){var t=e.startTime.getTotalMinutes()-y;return t/v*m}function x(e){return e.slotIdx/e.group.slots.length*100+"%"}function E(e){var t=e.totalMinutes+1;return t/v*m}function D(e){return 1/e.group.slots.length*100+"%"}function P(e){return o.colorCodes[e.course.color]}function B(e){i.show({templateUrl:"html/export_to_calendar.dialog.html",controller:"ExportToCalendarDialogCtrl",controllerAs:"vm",parent:angular.element(document.body),clickOutsideToClose:!0,escapeToClose:!0,locals:{schedule:e}})}u.call(this,e,t,s);var N=this,j=s.getSchedulingOptions();N.showFinalsSchedule=j.showFinalsSchedule,N.finalMeetings=l,N.hours=n,N.halfHours=r,N.days=c,N.dayDates=a,N.finalColorOpacity=S,N.sectionColorOpacity=T,N.currScheduleListInfo=s.getCurrScheduleListInfo(),N.showShareMessage=!1,N.addSavedSchedule=s.addSavedSchedule,N.exportScheduleToCalendar=B,N.toggleFinalsSchedule=d,N.getFinalsForDay=h,N.getFinalStyle=f,N.getFinalHoverStyle=p,N.getSectionViewStyle=A,N.getSectionViewHoverStyle=M,s.registerCurrScheduleListInfoChangeListener("scheduleDisplay",function(e){N.currScheduleListInfo=e,e.scheduleListChanged&&N.goToState("schedule.viewSchedule",{scheduleId:e.firstScheduleId})})}for(var n=[],r=[],c=["Monday","Tuesday","Wednesday","Thursday","Friday"],a={Monday:"12/12",Tuesday:"12/13",Wednesday:"12/14",Thursday:"12/15",Friday:"12/16"},l=[new i(new s(8,0),new s(11,0),{}),new i(new s(11,30),new s(14,30),{}),new i(new s(15,0),new s(18,0),{}),new i(new s(19,0),new s(22,0),{})],d=8,h=24,f=h-d,p=d;h>p;p++)n.push(new s(p,0)),r.push(new s(p,0)),r.push(new s(p,30));var g=165,m=600,y=new s(d,0).getTotalMinutes(),v=new s(f,0).getTotalMinutes(),S="0.6",T="0.6";return t.prototype=Object.create(u.prototype),{scope:{schedule:"="},controller:["$state","$window","$mdDialog","scheduleFactory",t],controllerAs:"vm",templateUrl:"html/schedule_display.partial.html"}}var o=e("../models/course"),i=e("../models/meeting"),s=e("../models/time"),u=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsScheduleDisplay",["scheduleFactory",r])},{"../models/course":17,"../models/meeting":19,"../models/time":25,"./_base.controller":1}],15:[function(e,t,n){function r(e,t,n,r,i){i.pageTrack("/schedule/course/{}".replace("{}",n.id)),o.call(this,e,t,r);var s=this;s.selectedCourse=null,r.getCourseQById(n.id).then(function(e){s.selectedCourse=e})}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("ViewCourseCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],16:[function(e,t,n){function r(e,t,n,r,i){i.pageTrack("/schedule/{}".replace("{}",n.scheduleId)),o.call(this,e,t,r);var s=this,u=n.scheduleId,c="false"!==n.noTimeConflicts;r.setSchedulingOption("noTimeConflicts",c),s.selectedSchedule=null,u&&(s.selectedSchedule=r.setCurrentScheduleById(u)),null===s.selectedSchedule&&s.goToState("schedule.generatingSchedules",{startScheduleId:u})}var o=e("./_base.controller");r.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("ViewScheduleCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],17:[function(e,t,n){"use strict";function r(e){void 0===e.displayName&&console.log(e);var t=e.displayName.split(" ",2);this.department=t[0],this.courseNumber=t[1],this.title=e.title,this.description=e.description,this.id=parseInt(e.id),this.units=e.units;var n=e.meetings;this.meetings=n.map(i.parse),this.finalMeeting=new o(this),this.sectionTypes=[],this.sections=e.sections.map(function(e){var t=new s(e,this);return this.sectionTypes.indexOf(t.type)<0&&this.sectionTypes.push(t.type),t},this),this.selected=!1,this.color=null,this.view=!1}var o=e("./final"),i=e("./meeting"),s=e("./section");r.colorCodes={red:"#f44336",pink:"#e91e63",purple:"#9c27b0","deep-purple":"#673ab7",indigo:"#3f51b5",blue:"#2196f3","light-blue":"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50","light-green":"#8bc34a",amber:"#ffc107",orange:"#ff9800","deep-orange":"#ff5722",brown:"#795548","blue-grey":"#607d8b"},r.unregisteredColors=Object.keys(r.colorCodes),r.registeredColors=[],r.courseColors={},r.getRegisteredColor=function(){
var e=r.unregisteredColors.length;if(0==e)return r.registeredColors[Math.floor(Math.random()*r.registeredColors.length)];var t=Math.floor(Math.random()*e),n=r.unregisteredColors.splice(t,1)[0];return r.registeredColors.push(n),n},r.unRegisterColor=function(e){r.registeredColors.remove(e),r.unregisteredColors.push(e)},r.parse=function(e){return new r(e)},r.prototype.getName=function(){return this.department+" "+this.courseNumber},r.prototype.getSectionsByType=function(e){return this.sections.filter(function(t){return t.type===e})},r.prototype.add=function(){r.courseColors.hasOwnProperty(this.id)||(r.courseColors[this.id]=r.getRegisteredColor()),this.color=r.courseColors[this.id]},r.prototype.drop=function(){this.selected=!1,delete r.courseColors[this.id],r.unRegisterColor(this.color)},t.exports=r},{"./final":18,"./meeting":19,"./section":24}],18:[function(e,t,n){"use strict";function r(e){if(this.course=e,this.meeting=r.getSubjectCourseToFinalSection(e),!this.meeting&&e.meetings.length){var t=e.meetings[0].days;t.Saturday||t.Sunday?this.meeting=r.getSatSunCourseTimeToFinalSection(e):t.Monday||t.Wednesday||t.Friday?this.meeting=r.getMTWRFCourseTimeToFinalSection(e):(t.Tuesday||t.Thursday)&&(this.meeting=r.getTRCourseTimeToFinalSection(e))}}var o=e("./meeting"),i=e("./time");r.meetings={Monday811AM:new o(new i(8,0),new i(11,0),o.daysFromAbrvs("M")),Monday1130230PM:new o(new i(11,30),new i(14,30),o.daysFromAbrvs("M")),Monday36PM:new o(new i(15,0),new i(18,0),o.daysFromAbrvs("M")),Monday710PM:new o(new i(19,0),new i(22,0),o.daysFromAbrvs("M")),Tuesday811AM:new o(new i(8,0),new i(11,0),o.daysFromAbrvs("T")),Tuesday1130230PM:new o(new i(11,30),new i(14,30),o.daysFromAbrvs("T")),Tuesday36PM:new o(new i(15,0),new i(18,0),o.daysFromAbrvs("T")),Tuesday710PM:new o(new i(19,0),new i(22,0),o.daysFromAbrvs("T")),Wednesday811AM:new o(new i(8,0),new i(11,0),o.daysFromAbrvs("W")),Wednesday1130230PM:new o(new i(11,30),new i(14,30),o.daysFromAbrvs("W")),Wednesday36PM:new o(new i(15,0),new i(18,0),o.daysFromAbrvs("W")),Wednesday710PM:new o(new i(19,0),new i(22,0),o.daysFromAbrvs("W")),Thursday811AM:new o(new i(8,0),new i(11,0),o.daysFromAbrvs("R")),Thursday1130230PM:new o(new i(11,30),new i(14,30),o.daysFromAbrvs("R")),Thursday36PM:new o(new i(15,0),new i(18,0),o.daysFromAbrvs("R")),Thursday710PM:new o(new i(19,0),new i(22,0),o.daysFromAbrvs("R")),Friday811AM:new o(new i(8,0),new i(11,0),o.daysFromAbrvs("F")),Friday1130230PM:new o(new i(11,30),new i(14,30),o.daysFromAbrvs("F")),Friday36PM:new o(new i(15,0),new i(18,0),o.daysFromAbrvs("F")),Friday710PM:new o(new i(19,0),new i(22,0),o.daysFromAbrvs("F"))},r.elementaryForeignLangListing={AFRICAM:["30A","30B","11A","11B","7A","7B","13A","13B"],ARABIC:["1A","1B"],CELTIC:["102A","15"],CHINESE:["1A","1B","1X","1Y"],CUNEIF:["100A","100B","106A","106B","102A","102B"],EGYPT:["100A","100B"],FRENCH:["1","2"],GERMAN:["1","2"],GREEK:["1","2"],HEBREW:["1A","1B"],ITALIAN:["1","2"],JAPAN:["1A","1B"],KOREAN:["1A","1AX","1B","1BX"],LATIN:["1","2"],PERSIAN:["1A","1B"],RUSSIAN:["1","2"],"S,SEASN":["1A","1B"],SANSKR:["100A","100B"],SPANISH:["1","2"],TELUGU:["1A","1B"],TIBETAN:["1A","1B"],TURKISH:["1A","1B"],YIDDISH:["101"]},r.getSubjectCourseToFinalSection=function(e){if("ECON"===e.department){if("1"===e.courseNumber||"100B"===e.courseNumber)return r.meetings.Tuesday1130230PM}else if("CHEM"===e.department){if("1A"===e.courseNumber||"1B"===e.courseNumber||"3A"===e.courseNumber||"3B"===e.courseNumber)return r.meetings.Monday36PM}else if(e.department in r.elementaryForeignLangListing&&r.elementaryForeignLangListing[e.department].indexOf(e.courseNumber)>=0)return r.meetings.Wednesday1130230PM},r.getMTWRFCourseTimeToFinalSection=function(e){switch(e.meetings[0].startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Monday710PM;case 9:return r.meetings.Tuesday710PM;case 10:return r.meetings.Monday811AM;case 11:return r.meetings.Monday1130230PM;case 12:return r.meetings.Friday1130230PM;case 13:return r.meetings.Wednesday710PM;case 14:return r.meetings.Thursday36PM;case 15:return r.meetings.Tuesday710PM;case 16:return r.meetings.Thursday811AM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Friday36PM}},r.getTRCourseTimeToFinalSection=function(e){switch(e.meetings[0].startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Wednesday36PM;case 9:return r.meetings.Tuesday36PM;case 10:return r.meetings.Friday36PM;case 11:return r.meetings.Wednesday811AM;case 12:case 13:return r.meetings.Friday811AM;case 14:return r.meetings.Tuesday811AM;case 15:case 16:return r.meetings.Friday710PM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Thursday1130230PM}},r.getSatSunCourseTimeToFinalSection=function(){return r.meetings.Wednesday36PM},t.exports=r},{"./meeting":19,"./time":25}],19:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.startTime=e,this.endTime=t,this.days=n,this.location=r,this.instructors=o}var o=e("./time.js");r.parse=function(e){if(e.location)var t=e.location.description||null;if(null===e.startTime||null===e.endTime)return new r(null,null,e.days,t,e.instructors);var n=e.startTime.split(":"),i=new o(parseInt(n[0]),parseInt(n[1])),s=e.endTime.split(":"),u=new o(parseInt(s[0]),parseInt(s[1]));return new r(i,u,e.days,t,e.instructors)},r.dayAbrvExpansions={M:"Monday",T:"Tuesday",W:"Wednesday",R:"Thursday",F:"Friday"},r.dayAbrvs=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]],r.daysFromAbrvs=function(e){for(var t={Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1},n=0;n<e.length;n++)t[r.dayAbrvExpansions[e[n]]]=!0;return t},r.prototype.getTotalMinutes=function(){return this.endTime.getTotalMinutes()-this.startTime.getTotalMinutes()},r.prototype.toString=function(){var e="";return r.dayAbrvs.forEach(function(t){this.days[t[0]]&&(e+=t[1])},this),null==this.startTime||null==this.endTime?e:e+" "+this.startTime.toString()+" - "+this.endTime.toString()},t.exports=r},{"./time.js":25}],20:[function(e,t,n){"use strict";function r(e,t){this.courses={},this.sectionsByDay={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[]},this.sectionGroupsByDay={};var n=[];t.forEach(function(e){n.push(e.id);var t=e.course.id;if(this.courses.hasOwnProperty(t)||(this.courses[t]=[]),this.courses[t].push(e),e.meetings.length>0)for(var r in e.meetings[0].days)e.meetings[0].days[r]&&this.sectionsByDay[r].push(e)},this);for(var o in this.sectionsByDay)this.sectionsByDay[o].sort(function(e,t){return e.meetings[0].startTime.compareTo(t.meetings[0].startTime)});this.id=r.generateId([e].concat(n)),this.selected=!0}var o=e("./meeting"),i=e("./scheduleSectionGroup");r.timeFootprints={},r.prototype.getTimeFootprint=function(){var e=o.dayAbrvs.map(function(e){return e[1]+this.sectionsByDay[e[0]].map(function(e){return e.meetings[0].startTime.getTotalMinutes()+"-"+e.meetings[0].endTime.getTotalMinutes()}).reduce(function(e,t){return e+"."+t},"")},this).reduce(function(e,t){return e+"|"+t},"");return r.timeFootprints[e]=this.sectionsByDay,e},r.prototype.getSectionGroupsForDay=function(e){return this.sectionGroupsByDay.hasOwnProperty(e)||(this.sectionGroupsByDay[e]=this._generateSectionGroupsForDay(e)),this.sectionGroupsByDay[e]},r.prototype._generateSectionGroupsForDay=function(e){if(!this.sectionsByDay[e].length)return[];for(var t=this.sectionsByDay[e],n=[],r=new i(t[0],e),o=1;o<t.length;o++){var s=t[o];r.hasOverlap(s)?r.add(s):(n.push(r),r=new i(s,e))}return n.push(r),n},r.generateId=function(e){var t=e.shift();return e=e.map(function(e){return parseInt(e)}),e.sort(function(e,t){return e-t}),e.unshift(t),e.join(".")},r.normalizeId=function(e){return null===e?null:r.generateId(e.split("."))},r.getUserIdFromId=function(e){return e.split(".")[0]},r.getSectionIdsFromId=function(e){return e.split(".").slice(1).map(function(e){return parseInt(e)})},t.exports=r},{"./meeting":19,"./scheduleSectionGroup":23}],21:[function(e,t,n){"use strict";function r(e){this.status=e}function o(){r.call(this,"stale")}function i(e,t){r.call(this,"generating"),this.numGenerated=e,this.total=t}function s(e,t){r.call(this,"filteringAndReordering"),this.total=e,this.filtering=t}function u(e){r.call(this,"done"),this.total=e}function c(e){r.call(this,"failed"),this.reason=e}o.prototype=Object.create(r.prototype),i.prototype=Object.create(r.prototype),s.prototype=Object.create(r.prototype),u.prototype=Object.create(r.prototype),c.prototype=Object.create(r.prototype);var a={Stale:o,Generating:i,FilteringAndReordering:s,Done:u,Failed:c};t.exports=a},{}],22:[function(e,t,n){"use strict";function r(e,t){this.id=r.generateId(e,t),this.userId=e,this.courses=t,this.sections={},this.sectionChoices=[],this.courses.forEach(function(e){e.sectionTypes.forEach(function(t){this.sectionChoices.push(e.getSectionsByType(t).map(function(e){return this.sections[e.id]=e,e},this).filter(function(e){return e.selected},this))},this)},this),this.resetIterator()}var o=e("./schedule");r.generateId=function(e,t){var n=t.map(function(e){return e.id});return n.unshift(e),o.generateId(n)},r.normalizeId=function(e){return null===e?null:o.generateId(e.split("."))},r.getCourseIdsFromId=function(e){return o.getSectionIdsFromId(e)},r.getUserIdFromId=function(e){return o.getUserIdFromId(e)},r.prototype._nextScheduleSectionIds=function(){return this._updateIterator()?this.sectionChoices.map(function(e,t){return e[this.sectionChoiceIterator[t]]},this):[]},r.prototype.getTotalNumSchedules=function(){return this.sectionChoices.length<=0?0:this.sectionChoices.map(function(e){return e.length}).reduce(function(e,t){return e*t},1)},r.prototype.nextSchedule=function(){var e=this._nextScheduleSectionIds();return this._getScheduleWithSections(e)},r.prototype.nextScheduleId=function(){var e=this._nextScheduleSectionIds().map(function(e){return e.id});return 0===e.length?null:o.generateId([this.userId].concat(e))},r.prototype.getScheduleById=function(e){var t=!0,n=o.getSectionIdsFromId(e);if(n.length!=this.sectionChoices.length)return null;var r=n.map(function(e){var n=this.sections[e];return n||(t=!1),n},this);return t?this._getScheduleWithSections(r):null},r.prototype.resetIterator=function(){this.sectionChoiceIterator=this.sectionChoices.map(function(){return 0}),this.sectionChoiceIterator[0]=-1},r.prototype._updateIterator=function(){if(0===this.getTotalNumSchedules())return!1;for(var e=0;e<this.sectionChoiceIterator.length;){if(this.sectionChoiceIterator[e]++,this.sectionChoiceIterator[e]<this.sectionChoices[e].length)return!0;this.sectionChoiceIterator[e]=0,e++}return!1},r.prototype._getScheduleWithSections=function(e){return 0===e.length?null:new o(this.userId,e)},t.exports=r},{"./schedule":20}],23:[function(e,t,n){"use strict";function r(e,t,n,r){this.group=e,this.course=t.course,this.type=t.type,this.startTime=t.meetings[0].startTime,this.endTime=t.meetings[0].endTime,this.location=t.meetings[0].location,this.totalMinutes=t.meetings[0].getTotalMinutes(),this.day=n,this.slotIdx=void 0!==r?r:-1}function o(e,t){this.day=t,this.slots=[[new r(this,e,t,0)]]}o.SectionView=r,o.prototype.hasOverlap=function(e){for(var t=new r(this,e,this.day),n=0;n<this.slots.length;n++){var o=this.slots[n];if(o[o.length-1].endTime.compareTo(t.startTime)>0)return!0}return!1},o.prototype.add=function(e){for(var t=new r(this,e,this.day),n=0;n<this.slots.length;n++){var o=this.slots[n];if(o[o.length-1].endTime.compareTo(t.startTime)<=0)return o.push(t),void(t.slotIdx=n)}this.slots.push([t]),t.slotIdx=this.slots.length-1},o.prototype.getSectionViews=function(){return this.slots.reduce(function(e,t){return e.concat(t)},[])},t.exports=o},{}],24:[function(e,t,n){"use strict";function r(e,t){angular.extend(this,e),this.id=parseInt(this.id);var n=this.meetings;this.meetings=n.map(o.parse),delete this.time,this.course=t,this.selected=!0}var o=e("./meeting");t.exports=r},{"./meeting":19}],25:[function(e,t,n){"use strict";function r(e,t){(0>e||e>24)&&console.error("invalid hours",e),this.hours=e,(0>t||t>59)&&console.error("invalid minutes",t),this.minutes=t}r.parse=function(e){return("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),new r(e.hours,e.minutes)},r.noon=new r(12,0),r.fivePM=new r(17,0),r.prototype.add=function(e){return new r(this.hours+e.hours,this.minutes+e.minutes)},r.prototype.compareTo=function(e){return this.getTotalMinutes()-e.getTotalMinutes()},r.prototype.toString=function(){var e=this.hours%24,t="AM";e>=12&&(t="PM"),e%=12,0==e&&(e=12);var n=e.toString();return 0!=this.minutes&&(n+=":"+this.minutes.toString()),n+t},r.prototype.getTotalMinutes=function(){return 60*this.hours+this.minutes},t.exports=r},{}]},{},[2]);