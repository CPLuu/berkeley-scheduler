!function e(t,n,r){function s(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,n){"use strict";function r(e,t){function n(t,n,r){e.go(t,n,r)}function r(e){t.open(e,"_blank")}var s=this;s.goToState=n,s.goToExternal=r}t.exports=r},{}],2:[function(e,t,n){!function(){"use strict";angular.module("scheduleBuilder",["ui.router","ngSanitize","ngCookies","ngMaterial","angulartics","angulartics.google.analytics"]),e("./config"),e("./courses.factory"),e("./reverseLookup.factory"),e("./schedule.factory"),e("./_base.controller"),e("./courseFind.controller"),e("./courseViewAndSelect.controller"),e("./scheduleViewAndSelect.controller"),e("./courseDisplayAndSelect.directive"),e("./scheduleDisplay.directive"),e("./generateSchedules.directive")}()},{"./_base.controller":1,"./config":3,"./courseDisplayAndSelect.directive":4,"./courseFind.controller":5,"./courseViewAndSelect.controller":6,"./courses.factory":7,"./generateSchedules.directive":8,"./reverseLookup.factory":9,"./schedule.factory":10,"./scheduleDisplay.directive":11,"./scheduleViewAndSelect.controller":12}],3:[function(e,t,n){angular.module("scheduleBuilder").config(["$stateProvider","$urlRouterProvider","$mdThemingProvider",function(e,t,n){e.state("schedule",{url:"/schedule",templateUrl:"html/schedule.html",controller:"CourseFindCtrl",controllerAs:"vm"}).state("schedule.viewCourse",{url:"/course/{id}",templateUrl:"html/course_view_and_select.partial.html",controller:"CourseViewAndSelectCtrl",controllerAs:"vm"}).state("schedule.viewSchedule",{url:"/{scheduleId}",templateUrl:"html/schedule_view_and_select.partial.html",controller:"ScheduleViewAndSelectCtrl",controllerAs:"vm"}),t.otherwise("schedule");var r={50:"#0073e1",100:"#0066c8",200:"#0059ae",300:"#004c95",400:"#003f7b",500:"#003262",600:"#002548",700:"#00182f",800:"#000b15",900:"#000000",A100:"#0080fb",A200:"#158dff",A400:"#2f99ff",A700:"#000000"};n.definePalette("berkeley-primary",r);var s={50:"#785301",100:"#916501",200:"#ab7601",300:"#c48802",400:"#dd9902",500:"#f6ab02",600:"#fdbd2e",700:"#fdc548",800:"#fecd61",900:"#fed57a",A100:"#fdbd2e",A200:"#FDB515",A400:"#f6ab02",A700:"#fedd93"};n.definePalette("berkeley-accent",s),n.theme("default").primaryPalette("berkeley-primary").accentPalette("berkeley-accent")}])},{}],4:[function(e,t,n){function r(){function e(e,t,n,r){function i(){u.selectAllSections?n.course.sections.forEach(function(e){e.selected=!0}):n.course.sections.forEach(function(e){e.selected=!1}),o()}function o(){r.setStale(!0)}function a(e){return u.sectionTypeMapping[e.type]}s.call(this,e,t);var u=this;u.sectionTypeMapping={LEC:0,DIS:3,GRP:5,LAB:7},u.selectAllSections=!1,u.onChangeSelectAllSections=i,u.setSchedulesStale=o,u.extractSectionTypeMapping=a}return e.prototype=Object.create(s.prototype),{scope:{course:"="},controller:["$state","$window","$scope","scheduleFactory",e],controllerAs:"vm",templateUrl:"html/course_display_and_select.partial.html"}}var s=e("./_base.controller");angular.module("scheduleBuilder").directive("sbCourseDisplayAndSelect",[r])},{"./_base.controller":1}],5:[function(e,t,n){function r(e,t,n,r,i){function o(e){return e?S.subjectAreasList.filter(a(e)):S.subjectAreasList}function a(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.code).indexOf(e)?!0:0===angular.lowercase(t.description).indexOf(e)?!0:t.abbreviations.some(function(t){return 0===angular.lowercase(t).indexOf(e)})}}function u(e){return e?void n.getCoursesQBySubjectAreaCode(e.code).then(function(e){S.coursesList=e,S.courseIsDisabled=!1}):(S.courseIsDisabled=!0,void(S.coursesList=[]))}function c(e){return e?S.coursesList.filter(l(e)):S.coursesList}function l(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.courseNumber).indexOf(e)||0===angular.lowercase(t.title).indexOf(e)}}function d(e){e&&y(e)}function f(e){var t=e.courseNumber;return parseInt(T.exec(t)[2])}function h(e){var t=e.courseNumber;return T.exec(t)[3]}function p(e){var t=e.courseNumber;return T.exec(t)[1]}function g(){r.setStale()}function m(){r.setInDisplayMode(!1),S.goToState("schedule")}function y(e){r.addCourse(e)}function v(e){r.dropCourse(e)}i.pageTrack("/schedule"),s.call(this,e,t);var S=this;S.scheduleIsReady=r.isReady(),S.subjectAreaIsDisabled=!1,S.courseIsDisabled=!0,S.selectedCourse=null,S.inDisplayMode=!1,S.coursesList=[],S.subjectAreasList=[],S.currCourse=null,S.searchSubjectArea=o,S.selectSubjectArea=u,S.searchCourse=c,S.selectCourse=d,S.extractCourseNumberNumber=f,S.extractCourseNumberSuffix=h,S.extractCourseNumberPrefix=p,S.addedCoursesList=r.getAllCourses(),S.setSchedulesStale=g,S.leaveDisplayMode=m,S.addCourse=y,S.dropCourse=v,S.generateSchedulesQ=r.generateSchedulesQ,n.getSubjectAreasQ().then(function(e){S.subjectAreasList=e}),r.registerSetReadyListener(function(e){S.scheduleIsReady=e}),r.registerSetInDisplayModeListener(function(e){S.inDisplayMode=e}),r.registerSetCurrCourseListener(function(e){S.currCourse=e}),r.registerAddCourseListener(function(e){S.addedCoursesList.push(e),S.scheduleIsReady&&S.goToState("schedule.viewCourse",{id:e.id})}),r.registerDropCourseListener(function(e){S.addedCoursesList.remove(e),0!=S.addedCoursesList.length?S.goToState("schedule.viewCourse",{id:S.addedCoursesList[S.addedCoursesList.length-1].id}):S.goToState("schedule")});var T=/^([a-zA-Z]*)(\d+)([a-zA-Z]*)/}var s=e("./_base.controller");r.prototype=Object.create(s.prototype),angular.module("scheduleBuilder").controller("CourseFindCtrl",["$state","$window","courses","scheduleFactory","$analytics",r])},{"./_base.controller":1}],6:[function(e,t,n){function r(e,t,n,r,i){i.pageTrack("/schedule/course/{}".replace("{}",n.id)),s.call(this,e,t);var o=this;o.selectedCourse=null,r.getCourseQById(n.id).then(function(e){o.selectedCourse=e,r.setCurrCourse(e)})}var s=e("./_base.controller");r.prototype=Object.create(s.prototype),angular.module("scheduleBuilder").controller("CourseViewAndSelectCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],7:[function(e,t,n){"use strict";function r(e,t){function n(){return l}function r(t){if(t in c)return c[t];var n=u(t),r=a.replace("{}",n),i=e.get(r).then(function(e){var t=e.data;return Object.keys(t).map(function(e){return s.parse(t[e])})},function(){return[]});return c[t]=i,i}function u(e){return e.replace(/\W/g,"")}var c={},l=t.all([e.get(i),e.get(o).then(function(e){return e},function(){return{data:{}}})]).then(function(e){var t=e[0].data.subjectAreas,n=e[1].data;return Object.keys(t).map(function(e){return{code:e,description:t[e],abbreviations:e in n?n[e]:[]}})});return{getSubjectAreasQ:n,getCoursesQBySubjectAreaCode:r}}var s=e("../models/course"),i="data/final/departments.json",o="data/final/abbreviations.json",a="data/final/fa16/classes/{}.json";angular.module("scheduleBuilder").factory("courses",["$http","$q",r])},{"../models/course":13}],8:[function(e,t,n){function r(){function e(e,t,n){function r(){var e=n.getCurrScheduleId();void 0!==e&&m.goToState("schedule.viewSchedule",{scheduleId:e})}function o(){m.generateMessage="Generating",n.generateSchedulesQ().then(function(){n.filterSchedules(),n.reorderSchedules(),m.generateMessage="Generate Schedules",r()})}function a(){m.showOptions=!m.showOptions,n.setSchedulingOption("showOptions",m.showOptions)}function u(){switch(m.gapOption){case m.gapOptions.minimize:n.setSchedulingOption("minimizeGaps",!0),n.setSchedulingOption("maximizeGaps",!1);break;case m.gapOptions.maximize:n.setSchedulingOption("minimizeGaps",!1),n.setSchedulingOption("maximizeGaps",!0);break;case m.gapOptions.none:n.setSchedulingOption("minimizeGaps",!1),n.setSchedulingOption("maximizeGaps",!1)}null!=m.gapOption&&(m.preferPartOfDay=m.partsOfDay.none,n.setSchedulingOption("preferMornings",!1),n.setSchedulingOption("preferAfternoons",!1),n.setSchedulingOption("preferEvenings",!1)),n.reorderSchedules()}function c(){switch(m.preferPartOfDay){case m.partsOfDay.morning:n.setSchedulingOption("preferMornings",!0),n.setSchedulingOption("preferAfternoons",!1),n.setSchedulingOption("preferEvenings",!1);break;case m.partsOfDay.afternoon:n.setSchedulingOption("preferMornings",!1),n.setSchedulingOption("preferAfternoons",!0),n.setSchedulingOption("preferEvenings",!1);break;case m.partsOfDay.evening:n.setSchedulingOption("preferMornings",!1),n.setSchedulingOption("preferAfternoons",!1),n.setSchedulingOption("preferEvenings",!0);break;case m.partsOfDay.none:n.setSchedulingOption("preferMornings",!1),n.setSchedulingOption("preferAfternoons",!1),n.setSchedulingOption("preferEvenings",!1)}m.preferPartOfDay!=m.partsOfDay.none&&(m.gapOption=m.gapOptions.none,n.setSchedulingOption("minimizeGaps",!1),n.setSchedulingOption("maximizeGaps",!1)),n.reorderSchedules()}function l(){m.disablePreferNoTimeConflicts=m.noTimeConflicts,n.setSchedulingOption("noTimeConflicts",m.noTimeConflicts),n.filterSchedules(),n.reorderSchedules()}function d(){C.setSchedulingOption("preferNoTimeConflicts",m.preferNoTimeConflicts),C.reorderSchedules()}function f(){for(var e=v.slice(),t=s.parse(m.selectedDayStartTimeJson);e.length>0&&e[0].compareTo(t)<0;)e.shift();m.dayEndTimes=e,n.setSchedulingOption("dayStartTime",t),n.filterSchedules(),n.reorderSchedules()}function h(){for(var e=v.slice(),t=s.parse(m.selectedDayEndTimeJson);e.length>0&&e[e.length-1].compareTo(t)>0;)e.pop();m.dayStartTimes=e,n.setSchedulingOption("dayEndTime",t),n.filterSchedules(),n.reorderSchedules()}function p(e){var t=s.parse(m.selectedDayStartTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}function g(e){var t=s.parse(m.selectedDayEndTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}i.call(this,e,t);for(var m=this,y=[],v=[],S=8,T=24,w=S;T>w;w++)y.push(new s(w,0)),v.push(new s(w,0)),v.push(new s(w,30));y.push(new s(w,0)),v.push(new s(w,0));var C=n.getSchedulingOptions();m.scheduleIsStale=n.isStale(),m.generateMessage="Generate Schedules",m.showOptions=C.showOptions,m.viewSchedules=r,m.generateAndViewSchedules=o,m.toggleOptions=a,m.gapOptions={minimize:"minimizeGaps",maximize:"maximizeGaps",none:"dontWorryAboutGaps"},C.minimizeGaps?m.gapOption=m.gapOptions.minimize:C.maximizeGaps?m.gapOption=m.gapOptions.maximize:m.gapOption=m.gapOptions.none,m.onChangeGapOption=u,m.partsOfDay={morning:"preferMorning",afternoon:"preferAfternoon",evening:"preferEvening",none:"preferNone"},C.preferMornings?m.preferPartOfDay=m.partsOfDay.morning:C.preferAfternoons?m.preferPartOfDay=m.partsOfDay.afternoon:C.preferEvenings?m.preferPartOfDay=m.partsOfDay.evening:m.preferPartOfDay=m.partsOfDay.none,m.onChangePreferPartOfDay=c,m.selectedDayStartTimeJson=C.dayStartTime||v[0],m.selectedDayEndTimeJson=C.dayEndTime||v[v.length-1],m.dayStartTimes=v,m.dayEndTimes=v,m.onSelectDayStartTime=f,m.onSelectDayEndTime=h,m.isSelectedDayStartTime=p,m.isSelectedDayEndTime=g,m.noTimeConflicts=C.noTimeConflicts,m.onChangeNoTimeConflicts=l,m.preferNoTimeConflicts=C.preferNoTimeConflicts,m.disablePreferNoTimeConflicts=m.noTimeConflicts,m.onChangePreferNoTimeConflicts=d,n.registerSetStaleListener(function(e){m.scheduleIsStale=e})}return e.prototype=Object.create(i.prototype),{controller:["$state","$window","scheduleFactory",e],controllerAs:"dvm",templateUrl:"html/generate_schedules.partial.html"}}var s=e("../models/time"),i=e("./_base.controller");angular.module("scheduleBuilder").directive("sbGenerateSchedules",[r])},{"../models/time":18,"./_base.controller":1}],9:[function(e,t,n){"use strict";function r(e,t,n){function r(e){if(e in a){var r=t.defer();return r.resolve(a[e]),r.promise}return c.then(function(t){return t[e]}).then(function(t){return n.getCoursesQBySubjectAreaCode(t[0]).then(function(n){for(var r=t[1],s=0;s<n.length;s++)if(n[s].courseNumber===r){var i=n[s];return a[e]=i,i}})})}function s(e){if(e in a){var n=t.defer();return n.resolve(a[e]),n.promise}return u.then(function(t){return t[e]}).then(r)}var a={},u=e.get(i).then(function(e){return e.data}),c=e.get(o).then(function(e){return e.data});return{getCourseQBy1arySectionId:r,getCourseQBy2arySectionId:s}}var s="data/final/fa16/indices/{}.json",i=s.replace("{}","2ary-to-1ary-section-id"),o=s.replace("{}","1ary-section-id-to-subject-area");angular.module("scheduleBuilder").factory("reverseLookup",["$http","$q","courses",r])},{}],10:[function(e,t,n){function r(e,t,n,r){function d(){for(var e="",t=0;10>t;t++)e+=o[Math.floor(Math.random()*o.length)];return e}function f(){var e=n.get(a);return void 0===e&&(e=d(),n.put(a,e,{expires:ne})),e}function h(){var e=n.getObject(u);return void 0===e&&re&&(e=[re],n.putObject(u,se,{expires:ne})),e}function p(){var e=l.replace("{}",re),t=n.getObject(e);return void 0===t&&(t={}),t.showOptions=t.showOptions||!1,t.minimizeGaps=t.minimizeGaps||!1,t.maximizeGaps=t.maximizeGaps||!1,t.preferMornings=t.preferMornings||!1,t.preferAfternoons=t.preferAfternoons||!1,t.preferEvenings=t.preferEvenings||!1,t.preferNoTimeConflicts=t.preferNoTimeConflicts||!1,t.dayStartTime=t.dayStartTime||null,t.dayEndTime=t.dayEndTime||null,void 0===t.noTimeConflicts&&(t.noTimeConflicts=!0),t.showFinalsSchedule=t.showFinalsSchedule||!1,t}function g(){var e=l.replace("{}",re);n.putObject(e,me)}function m(){var e=c.replace("{}",re),t=n.getObject(e);t&&t.forEach(function(e){Y.push(r.getCourseQBy1arySectionId(e.id).then(function(t){t.sections.forEach(function(t){e.unselectedSections.indexOf(t.id)>=0&&(t.selected=!1)}),P(t)}))})}function y(){var e=[];for(var t in ie){var r=[],s=[];ie[t].sections.forEach(function(e){e.selected?r.push(e.id):s.push(e.id)}),e.push({id:t,selectedSections:r,unselectedSections:s})}var i=c.replace("{}",re);n.putObject(i,e,{expires:ne})}function v(){return J}function S(){J=!0,K.forEach(function(e){e(J)})}function T(e){K.push(e)}function w(){return X}function C(e){X=e,y(),Z.forEach(function(e){e(X)})}function b(e){Z.push(e)}function A(e){ee=e,te.forEach(function(t){t(e)})}function M(e){te.push(e)}function O(e){oe=e,le.forEach(function(t){t(e)})}function F(e){le.push(e)}function I(){var e=[];for(var t in ie)e.push(ie[t]);return e}function D(t){if(ie.hasOwnProperty(t)){var n=e.defer();return n.resolve(ie[t]),n.promise}var s=r.getCourseQBy2arySectionId(t);return s.then(B),s}function P(e){return ie.hasOwnProperty(e.id)?!1:(ie[e.id]=e,e.add(),e.sections.forEach(function(e){ae[e.id]=e}),C(!0),ue.forEach(function(t){t(e)}),!0)}function B(e){var t=P(e);return t&&y(),t}function E(e){return ie.hasOwnProperty(e.id)?(delete ie[e.id],e.drop(),e.sections.forEach(function(e){delete ae[e.id]}),C(!0),ce.forEach(function(t){t(e)}),!0):!1}function x(e){var t=E(e);return t&&y(),t}function L(e){ue.push(e)}function N(e){ce.push(e)}function j(){return t(function(){if(X){de={},fe=[];var e=[];for(var t in ie){var n=ie[t];n.sectionTypes.forEach(function(t){e.push(n.getSectionsByType(t).filter(function(e){return e.selected}))})}var r=e.length,s=function(t,n){for(var o=0,a=e[n].length;a>o;o++){var u=t.slice(0);if(u.push(e[n][o]),n===r-1){var c=new i(re,u);de[c.id]=c,fe.push(c.id)}else s(u,n+1)}};s([],0),he=fe.slice(),ge=0,C(!1),_()}})}function R(t){var n=i.getUserIdFromId(t),s=n==re;s||A(!0);var o=e.defer();if(de.hasOwnProperty(t))return o.resolve(de[t]),o.promise;if(t=i.normalizeId(t),de.hasOwnProperty(t))return o.resolve(de[t]),o.promise;var a=i.getSectionIdsFromId(t),u=[],c=[];return a.forEach(function(e){ae.hasOwnProperty(e)?u.push(ae[e]):c.push(r.getCourseQBy2arySectionId(e).then(function(t){if(s)if(X=!0,P(t))t.sections.forEach(function(t){t.id===e?(t.selected=!0,u.push(t)):t.selected=!1});else{t=ie[t.id];for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(r.id===e){u.push(r),r.selected=!0;break}}}else{t.add();for(var i=0;i<t.sections.length;i++)if(t.sections[i].id===e){u.push(t.sections[i]);break}}}))}),e.all(c).then(function(){var e=new i(n,u);return de[e.id]=e,s&&j().then(function(){V(),q()}),e})}function z(){return he[ge]}function G(){var e=he.length,t=(ge+e-1)%e;return he[t]}function k(){var e=(ge+1)%he.length;return he[e]}function $(){return{total:he.length,currentIdx:ge,firstScheduleId:he[0],prevScheduleId:G(),nextScheduleId:k()}}function _(e){var t=$();t.scheduleListChanged=e,Object.keys(pe).forEach(function(e){pe[e](t)})}function W(e,t){pe[e]=t}function Q(e){de.hasOwnProperty(e)||(e=i.normalizeId(e));var t=!1;ge=he.indexOf(e),0>ge&&(ge=0,t=!0),_(t)}function U(){return angular.copy(me)}function H(e,t){me[e]=t,g()}function V(){var e=z();he=fe.slice(),Object.keys(ve).forEach(function(e){var t=ve[e];he=he.filter(function(e){return t(de[e])})});var t=!0;ge=he.indexOf(e),0>ge&&(ge=0),_(t)}function q(){var e,t,n=z(),r=Object.keys(ye),s={};he.sort(function(n,i){return s.hasOwnProperty(n)||(e=de[n],t=0,r.forEach(function(n){me[n]&&(t+=ye[n](e))}),s[n]=t),s.hasOwnProperty(i)||(e=de[i],t=0,r.forEach(function(n){me[n]&&(t+=ye[n](e))}),s[i]=t),s[i]-s[n]});var i=!0;ge=he.indexOf(n),0>ge&&(ge=0),_(i)}var J=!1,Y=[],K=[],X=!1,Z=[],ee=!1,te=[],ne=function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e}(),re=f(),se=h(),ie={},oe=null,ae={},ue=[],ce=[],le=[],de={},fe=[],he=[],pe={},ge=0,me=p(),ye={minimizeGaps:function(e){return-ye.maximizeGaps(e)},maximizeGaps:function(e){var t,n,r,s,i=0;for(var o in e.meetingsByDay){var a=e.meetingsByDay[o];if(a.length>=2)for(n=a[0].meeting.endTime.getTotalMinutes(),r=1;r<a.length;r++)t=a[r],n>0&&(s=t.meeting.startTime.getTotalMinutes()-n,i+=Math.max(0,s)/60),n=Math.max(n,t.meeting.endTime.getTotalMinutes())}return i},preferMornings:function(e){var t=0,n=0;for(var r in e.meetingsByDay)for(var i=e.meetingsByDay[r],o=0;o<i.length;o++)n++,i[o].meeting.endTime.compareTo(s.noon)<=0&&t++;return t/n},preferAfternoons:function(e){var t=0,n=0;for(var r in e.meetingsByDay)for(var i=e.meetingsByDay[r],o=0;o<i.length;o++)n++,i[o].meeting.startTime.compareTo(s.noon)>=0&&i[o].meeting.endTime.compareTo(s.fivePM)<=0&&t++;return t/n},preferEvenings:function(e){var t=0,n=0;for(var r in e.meetingsByDay)for(var i=e.meetingsByDay[r],o=0;o<i.length;o++)n++,i[o].meeting.startTime.compareTo(s.fivePM)>=0&&t++;return t/n},preferNoTimeConflicts:function(e){var t,n,r,s=0,i=0;for(var o in e.meetingsByDay){var a=e.meetingsByDay[o];if(i+=a.length,a.length>=2)for(n=a[0].meeting.endTime.getTotalMinutes(),r=1;r<a.length;r++)t=a[r],n>0&&t.meeting.startTime.getTotalMinutes()<n&&s++,n=Math.max(n,t.meeting.endTime.getTotalMinutes())}return s/i}},ve={noTimeConflicts:function(e){if(!me.noTimeConflicts)return!0;var t,n,r;for(var s in e.meetingsByDay){var i=e.meetingsByDay[s];if(i.length>=2)for(n=i[0].meeting.endTime.getTotalMinutes(),r=1;r<i.length;r++){if(t=i[r],n>0&&t.meeting.startTime.getTotalMinutes()<n)return!1;n=Math.max(n,t.meeting.endTime.getTotalMinutes())}}return!0},dayStartTime:function(e){if(null==me.dayStartTime)return!0;for(var t in e.meetingsByDay){var n=e.meetingsByDay[t];if(n.length>0&&n[0].meeting.startTime.compareTo(me.dayStartTime)<0)return!1}return!0},dayEndTime:function(e){if(null==me.dayEndTime)return!0;for(var t in e.meetingsByDay)for(var n=e.meetingsByDay[t],r=0;r<n.length;r++)if(n[r].meeting.endTime.compareTo(me.dayEndTime)>0)return!1;return!0}};return m(),e.all(Y).then(function(){S()}),{isReady:v,registerSetReadyListener:T,isStale:w,setStale:C,registerSetStaleListener:b,setInDisplayMode:A,registerSetInDisplayModeListener:M,setCurrCourse:O,registerSetCurrCourseListener:F,getAllCourses:I,getCourseQById:D,addCourse:B,registerAddCourseListener:L,dropCourse:x,registerDropCourseListener:N,generateSchedulesQ:j,getScheduleQById:R,getCurrScheduleId:z,getPrevScheduleId:G,getNextScheduleId:k,getCurrScheduleListInfo:$,registerCurrScheduleListInfoChangeListener:W,setCurrentScheduleById:Q,getSchedulingOptions:U,setSchedulingOption:H,filterSchedules:V,reorderSchedules:q}}var s=e("../models/time"),i=e("../models/schedule"),o="abcdefghijklmnopqrstuvwxyz0123456789",a="primaryUserId",u="allUserIds",c="{}.addedCourses",l="{}.schedulingOptions";angular.module("scheduleBuilder").factory("scheduleFactory",["$q","$timeout","$cookies","reverseLookup",r])},{"../models/schedule":16,"../models/time":18}],11:[function(e,t,n){function r(e){function t(e,t,i){function o(){A.showFinalsSchedule=!A.showFinalsSchedule,i.setSchedulingOption("showFinalsSchedule",A.showFinalsSchedule)}function d(e,t){var n=[];for(var r in e){var s=e[r][0].course.finalMeeting;s.meeting&&s.meeting.days[t]&&n.push(s)}return n}function f(e){switch(e.meeting.startTime.hours){case 8:return 0;case 11:return.25*g;case 15:return.5*g;case 19:return.75*g}}function h(){return g/4}function p(e){var t=s.colorCodes[e.course.color],n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return"rgba("+n+","+r+","+i+","+A.finalColorOpacity+")"}function w(e){var t=e.meeting.startTime.getTotalMinutes()-y;return t/v*m}function C(e){var t=e.meeting.getTotalMinutes();return t/v*m}function b(e){var t=s.colorCodes[e.course.color],n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return"rgba("+n+","+r+","+i+","+A.sectionColorOpacity+")"}a.call(this,e,t);var A=this,M=i.getSchedulingOptions();A.showFinalsSchedule=M.showFinalsSchedule,A.finalMeetings=l,A.hours=n,A.halfHours=r,A.days=u,A.dayDates=c,A.finalColorOpacity=S,A.sectionColorOpacity=T,A.currScheduleListInfo=i.getCurrScheduleListInfo(),A.showShareMessage=!1,A.toggleFinalsSchedule=o,A.getFinalsForDay=d,A.getFinalPosition=f,A.getFinalHeight=h,A.getFinalColor=p,A.getMeetingPosition=w,A.getMeetingHeight=C,A.getMeetingColor=b,i.registerCurrScheduleListInfoChangeListener("scheduleDisplay",function(e){A.currScheduleListInfo=e,e.scheduleListChanged&&A.goToState("schedule.viewSchedule",{scheduleId:e.firstScheduleId})})}for(var n=[],r=[],u=["Monday","Tuesday","Wednesday","Thursday","Friday"],c={Monday:"12/12",Tuesday:"12/13",Wednesday:"12/14",Thursday:"12/15",Friday:"12/16"},l=[new i(new o(8,0),new o(11,0),{}),new i(new o(11,30),new o(2,30),{}),new i(new o(15,0),new o(18,0),{}),new i(new o(19,0),new o(22,0),{})],d=8,f=24,h=f-d,p=d;f>p;p++)n.push(new o(p,0)),r.push(new o(p,0)),r.push(new o(p,30));var g=165,m=600,y=new o(d,0).getTotalMinutes(),v=new o(h,0).getTotalMinutes(),S="0.6",T="0.6";return t.prototype=Object.create(a.prototype),{scope:{schedule:"="},controller:["$state","$window","scheduleFactory",t],controllerAs:"vm",templateUrl:"html/schedule_display.partial.html"}}var s=e("../models/course"),i=e("../models/meeting"),o=e("../models/time"),a=e("./_base.controller");angular.module("scheduleBuilder").directive("sbScheduleDisplay",["scheduleFactory",r])},{"../models/course":13,"../models/meeting":15,"../models/time":18,"./_base.controller":1}],12:[function(e,t,n){function r(e,t,n,r,i){i.pageTrack("/schedule/{}".replace("{}",n.scheduleId)),s.call(this,e,t);var o=this,a=n.scheduleId;a&&(r.setCurrentScheduleById(n.scheduleId),r.getScheduleQById(n.scheduleId).then(function(e){o.selectedSchedule=e}))}var s=e("./_base.controller");r.prototype=Object.create(s.prototype),angular.module("scheduleBuilder").controller("ScheduleViewAndSelectCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],13:[function(e,t,n){"use strict";function r(e){void 0===e.displayName&&console.log(e);var t=e.displayName.split(" ",2);this.department=t[0],this.courseNumber=t[1],this.title=e.title,this.instructors=e.instructors,this.id=e.id,this.units=e.units,this.meeting=i.parse(e.time),this.finalMeeting=new s(this),this.sectionTypes=[],this.sections=e.sections.map(function(e){var t=new o(e,this);return this.sectionTypes.indexOf(t.type)<0&&this.sectionTypes.push(t.type),t},this),this.color=null,this.view=!1}var s=e("./final"),i=e("./meeting"),o=e("./section");r.colorCodes={red:"#f44336",pink:"#e91e63",purple:"#9c27b0","deep-purple":"#673ab7",indigo:"#3f51b5",blue:"#2196f3",cyan:"#00bcd4",teal:"#009688",green:"#4caf50","light-green":"#8bc34a",amber:"#ffc107",orange:"#ff9800","deep-orange":"#ff5722",brown:"#795548","blue-grey":"#607d8b"},r.unregisteredColors=Object.keys(r.colorCodes),r.registeredColors=[],r.courseColors={},r.getRegisteredColor=function(){var e=r.unregisteredColors.length;if(0==e)return r.registeredColors[Math.floor(Math.random()*r.registeredColors.length)];var t=Math.floor(Math.random()*e),n=r.unregisteredColors.splice(t,1)[0];return r.registeredColors.push(n),n},r.unRegisterColor=function(e){r.registeredColors.remove(e),r.unregisteredColors.push(e)},r.parse=function(e){return new r(e)},r.prototype.getSectionsByType=function(e){return this.sections.filter(function(t){return t.type===e})},r.prototype.add=function(){r.courseColors.hasOwnProperty(this.id)||(r.courseColors[this.id]=r.getRegisteredColor()),this.color=r.courseColors[this.id]},r.prototype.drop=function(){delete r.courseColors[this.id],r.unRegisterColor(this.color)},t.exports=r},{"./final":14,"./meeting":15,"./section":17}],14:[function(e,t,n){"use strict";function r(e){if(this.course=e,this.meeting=r.getSubjectCourseToFinalSection(e),!this.meeting&&e.meeting){var t=e.meeting.days;t.Saturday||t.Sunday?this.meeting=r.getSatSunCourseTimeToFinalSection(e):t.Monday||t.Wednesday||t.Friday?this.meeting=r.getMTWRFCourseTimeToFinalSection(e):(t.Tuesday||t.Thursday)&&(this.meeting=r.getTRCourseTimeToFinalSection(e))}}var s=e("./meeting"),i=e("./time");r.meetings={Monday811AM:new s(new i(8,0),new i(11,0),s.daysFromAbrvs("M")),Monday1130230PM:new s(new i(11,30),new i(2,30),s.daysFromAbrvs("M")),Monday36PM:new s(new i(15,0),new i(18,0),s.daysFromAbrvs("M")),Monday710PM:new s(new i(19,0),new i(22,0),s.daysFromAbrvs("M")),Tuesday811AM:new s(new i(8,0),new i(11,0),s.daysFromAbrvs("T")),Tuesday1130230PM:new s(new i(11,30),new i(2,30),s.daysFromAbrvs("T")),Tuesday36PM:new s(new i(15,0),new i(18,0),s.daysFromAbrvs("T")),Tuesday710PM:new s(new i(19,0),new i(22,0),s.daysFromAbrvs("T")),Wednesday811AM:new s(new i(8,0),new i(11,0),s.daysFromAbrvs("W")),Wednesday1130230PM:new s(new i(11,30),new i(2,30),s.daysFromAbrvs("W")),Wednesday36PM:new s(new i(15,0),new i(18,0),s.daysFromAbrvs("W")),Wednesday710PM:new s(new i(19,0),new i(22,0),s.daysFromAbrvs("W")),Thursday811AM:new s(new i(8,0),new i(11,0),s.daysFromAbrvs("R")),Thursday1130230PM:new s(new i(11,30),new i(2,30),s.daysFromAbrvs("R")),Thursday36PM:new s(new i(15,0),new i(18,0),s.daysFromAbrvs("R")),Thursday710PM:new s(new i(19,0),new i(22,0),s.daysFromAbrvs("R")),Friday811AM:new s(new i(8,0),new i(11,0),s.daysFromAbrvs("F")),Friday1130230PM:new s(new i(11,30),new i(2,30),s.daysFromAbrvs("F")),Friday36PM:new s(new i(15,0),new i(18,0),s.daysFromAbrvs("F")),Friday710PM:new s(new i(19,0),new i(22,0),s.daysFromAbrvs("F"))},r.elementaryForeignLangListing={AFRICAM:["30A","30B","11A","11B","7A","7B","13A","13B"],ARABIC:["1A","1B"],CELTIC:["102A","15"],CHINESE:["1A","1B","1X","1Y"],CUNEIF:["100A","100B","106A","106B","102A","102B"],EGYPT:["100A","100B"],FRENCH:["1","2"],GERMAN:["1","2"],GREEK:["1","2"],HEBREW:["1A","1B"],ITALIAN:["1","2"],JAPAN:["1A","1B"],KOREAN:["1A","1AX","1B","1BX"],LATIN:["1","2"],PERSIAN:["1A","1B"],RUSSIAN:["1","2"],"S,SEASN":["1A","1B"],SANSKR:["100A","100B"],SPANISH:["1","2"],TELUGU:["1A","1B"],TIBETAN:["1A","1B"],TURKISH:["1A","1B"],YIDDISH:["101"]},r.getSubjectCourseToFinalSection=function(e){if("ECON"===e.department){if("1"===e.courseNumber||"100B"===e.courseNumber)return r.meetings.Tuesday1130230PM}else if("CHEM"===e.department){if("1A"===e.courseNumber||"1B"===e.courseNumber)return r.meetings.Monday36PM}else if(e.department in r.elementaryForeignLangListing&&r.elementaryForeignLangListing[e.department].indexOf(e.courseNumber)>=0)return r.meetings.Wednesday1130230PM},r.getMTWRFCourseTimeToFinalSection=function(e){switch(e.meeting.startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Monday710PM;case 9:return r.meetings.Tuesday710PM;case 10:return r.meetings.Monday811AM;case 11:return r.meetings.Monday1130230PM;case 12:return r.meetings.Friday1130230PM;case 13:return r.meetings.Wednesday710PM;case 14:return r.meetings.Thursday36PM;case 15:return r.meetings.Tuesday710PM;case 16:return r.meetings.Thursday811AM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Friday36PM}},r.getTRCourseTimeToFinalSection=function(e){switch(e.meeting.startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Wednesday36PM;case 9:return r.meetings.Thursday36PM;case 10:return r.meetings.Friday36PM;case 11:return r.meetings.Wednesday811AM;case 12:case 13:return r.meetings.Friday811AM;case 14:return r.meetings.Tuesday811AM;case 15:case 16:return r.meetings.Friday710PM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Thursday1130230PM}},r.getSatSunCourseTimeToFinalSection=function(){return r.meetings.Wednesday36PM},t.exports=r},{"./meeting":15,"./time":18}],15:[function(e,t,n){"use strict";function r(e,t,n){this.startTime=e,this.endTime=t,this.days=n}var s=e("./time.js");r.parse=function(e){if(null===e.startTime||null===e.endTime)return new r(null,null,e.days);var t=e.startTime.split(":"),n=new s(parseInt(t[0]),parseInt(t[1])),i=e.endTime.split(":"),o=new s(parseInt(i[0]),parseInt(i[1]));return new r(n,o,e.days)},r.dayAbrvExpansions={M:"Monday",T:"Tuesday",W:"Wednesday",R:"Thursday",F:"Friday"},r.dayAbrvs=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]],r.daysFromAbrvs=function(e){for(var t={Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1},n=0;n<e.length;n++)t[r.dayAbrvExpansions[e[n]]]=!0;return t},r.prototype.getTotalMinutes=function(){return this.endTime.getTotalMinutes()-this.startTime.getTotalMinutes()},r.prototype.toString=function(){var e="";return r.dayAbrvs.forEach(function(t){this.days[t[0]]&&(e+=t[1])},this),null==this.startTime||null==this.endTime?e:e+" "+this.startTime.toString()+" - "+this.endTime.toString()},t.exports=r},{"./time.js":18}],16:[function(e,t,n){"use strict";function r(e,t){this.courses={},this.meetingsByDay={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[]};var n=[];t.forEach(function(e){n.push(e.id);var t=e.course.id;this.courses.hasOwnProperty(t)||(this.courses[t]=[]),this.courses[t].push(e);for(var r in e.meeting.days)e.meeting.days[r]&&this.meetingsByDay[r].push(e)},this);for(var s in this.meetingsByDay)this.meetingsByDay[s].sort(function(e,t){return e.meeting.startTime.compareTo(t.meeting.startTime)});this.id=r.generateId([e].concat(n)),this.selected=!0}r.generateId=function(e){var t=e.shift();return e=e.map(function(e){return parseInt(e)}),e.sort(function(e,t){return e-t}),e.unshift(t),e.join(".")},r.normalizeId=function(e){return null===e?null:r.generateId(e.split("."))},r.getUserIdFromId=function(e){return e.split(".")[0]},r.getSectionIdsFromId=function(e){return e.split(".").slice(1).map(function(e){return parseInt(e)})},t.exports=r},{}],17:[function(e,t,n){"use strict";function r(e,t){angular.extend(this,e),this.location=this.location.description,this.meeting=s.parse(this.time),delete this.time,this.course=t,this.selected=!0}var s=e("./meeting");t.exports=r},{"./meeting":15}],18:[function(e,t,n){"use strict";function r(e,t){(0>e||e>24)&&console.error("invalid hours",e),this.hours=e,(0>t||t>59)&&console.error("invalid minutes",t),this.minutes=t}r.parse=function(e){return("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),new r(e.hours,e.minutes)},r.noon=new r(12,0),r.fivePM=new r(17,0),r.prototype.add=function(e){return new r(this.hours+e.hours,this.minutes+e.minutes)},r.prototype.compareTo=function(e){return this.getTotalMinutes()-e.getTotalMinutes()},r.prototype.toString=function(){var e=this.hours,t="AM";e>=12&&(t="PM",e>12&&(e-=12));var n=e.toString();return 0!=this.minutes&&(n+=":"+this.minutes.toString()),
n+t},r.prototype.getTotalMinutes=function(){return 60*this.hours+this.minutes},t.exports=r},{}]},{},[2]);