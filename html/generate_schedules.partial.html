<p align="right">
  <md-button
      class="md-raised"
      ng-click="dvm.toggleSavedSchedules(!dvm.showSavedSchedules)"
      ng-class="{
        'md-primary': dvm.savedScheduleIds.length > 0,
        'schedule-button': dvm.savedScheduleIds.length > 0
      }">
    Saved Schedules
  </md-button>

  <md-button class="md-raised" ng-click="dvm.toggleOptions(!dvm.showOptions)">
    Scheduling Options
  </md-button>

  <span ng-if="dvm.scheduleGenerationStatus.status === 'stale'">
    <md-button class="md-accent md-raised" ng-click="dvm.generateAndViewSchedules()">
      Generate Schedules
    </md-button>
  </span>
  <span ng-if="
      dvm.scheduleGenerationStatus.status === 'generating' ||
      dvm.scheduleGenerationStatus.status === 'filteringAndReordering'
    ">
    <md-button class="md-accent md-raised" ng-click="dvm.generateAndViewSchedules()">
      Generating
    </md-button>
  </span>
  <span ng-if="dvm.scheduleGenerationStatus.status === 'done'">
    <md-button class="md-accent md-raised" ng-click="dvm.viewSchedules()">
      View Schedules
    </md-button>
  </span>
  <span ng-if="dvm.scheduleGenerationStatus.status === 'failed'">
    <md-button ng-click="dvm.viewSchedules()">
      No Valid Schedules
      <md-tooltip md-direction="bottom">
        Make changes to your courses/filtering options to fix this.
      </md-tooltip>
    </md-button>
  </span>
</p>

<div ng-show="dvm.showSavedSchedules">
  <div ng-if="dvm.savedScheduleIds.length > 0">
    <div layout="row" layout-wrap>
      <div
          class="saved-schedule"
          layout="column" layout-align="center center"
          ng-repeat="scheduleId in dvm.savedScheduleIds track by scheduleId"
          ng-click="dvm.goToState('schedule.viewSchedule', {scheduleId: scheduleId})">
        <div class="saved-schedule-drop" ng-click="dvm.dropSavedScheduleById($event, scheduleId)">
          <md-icon class="material-icons md-light"
                   md-svg-icon="close"
                   title="Discard">
          </md-icon>
        </div>
        <div flex></div>
        <div layout-padding>
          {{$index + 1}}
        </div>
      </div>
    </div>
  </div>
  <div ng-if="dvm.savedScheduleIds.length === 0">
    Save your favorite schedules and they will show up here
  </div>
  <br>
  <md-divider></md-divider>
</div>

<div ng-show="dvm.showOptions" class="scheduling-options">
  <md-list layout="column">
    <md-list-item ng-click="null">
      <div flex="25" class="md-body-2 scheduling-option-category">
        Preferred Time of Day
      </div>
      <md-radio-group flex ng-model="dvm.preferPartOfDay" ng-change="dvm.onChangePreferPartOfDay()" layout="row" layout-margin>
        <md-radio-button ng-value="dvm.partsOfDay.morning">
          Mornings
          <br>
          <span class="md-caption part-of-day">(&mdash; 12PM)</span>
        </md-radio-button>
        <md-radio-button ng-value="dvm.partsOfDay.afternoon">
          Afternoons
          <br>
          <span class="md-caption part-of-day">(12PM &mdash; 5PM)</span>
        </md-radio-button>
        <md-radio-button ng-value="dvm.partsOfDay.evening">
          Evenings
          <br>
          <span class="md-caption part-of-day">(5PM &mdash;)</span>
        </md-radio-button>
        <md-radio-button ng-value="dvm.partsOfDay.none">
          No preference
        </md-radio-button>
      </md-radio-group>
    </md-list-item>
    <md-list-item ng-click="null">
      <div flex="25" class="md-body-2 scheduling-option-category">
        Gaps
      </div>
      <md-radio-group flex ng-model="dvm.gapOption" ng-change="dvm.onChangeGapOption()" layout="row" layout-margin>
        <md-radio-button ng-value="dvm.gapOptions.minimize">
          Minimize Gaps
        </md-radio-button>
        <md-radio-button ng-value="dvm.gapOptions.maximize">
          Maximize Gaps
        </md-radio-button>
        <md-radio-button ng-value="dvm.gapOptions.none">
          No preference
        </md-radio-button>
      </md-radio-group>
    </md-list-item>
    <md-list-item ng-click="null">
      <div flex="25" class="md-body-2 scheduling-option-category">
        Time conflicts
      </div>
      <div layout="row" layout-margin>
        <div>
          <md-checkbox ng-model="dvm.noTimeConflicts" ng-change="dvm.onChangeNoTimeConflicts()">
            No time conflicts
          </md-checkbox>
        </div>
        <div>
          <md-checkbox
            ng-model="dvm.preferNoTimeConflicts"
            ng-disabled="dvm.disablePreferNoTimeConflicts"
            ng-change="dvm.onChangePreferNoTimeConflicts">
            Prefer no time conflicts
          </md-checkbox>
        </div>
      </div>
    </md-list-item>
    <md-list-item ng-click="null">
      <div flex="25" class="md-body-2 scheduling-option-category">
        Time restrictions
      </div>
      <div layout="row" layout-margin>
      <md-input-container class="schedule-option">
        <label>First class starting at/after</label>
        <md-select
          ng-model="dvm.selectedDayStartTimeJson"
          ng-change="dvm.onSelectDayStartTime();">
          <md-option
            ng-repeat="time in dvm.dayStartTimes"
            ng-selected="dvm.isSelectedDayStartTime(time)"
            value="{{time}}">
            {{time.toString()}}
          </md-option>
        </md-select>
      </md-input-container>
      <md-input-container class="schedule-option">
        <label>Last class ending at/before</label>
        <md-select
          ng-model="dvm.selectedDayEndTimeJson"
          ng-change="dvm.onSelectDayEndTime();">
          <md-option
            ng-repeat="time in dvm.dayEndTimes"
            ng-selected="dvm.isSelectedDayEndTime(time)"
            value="{{time}}">
            {{time.toString()}}
          </md-option>
        </md-select>
      </md-input-container>
      </div>
    </md-list-item>
  </md-list>
  <md-divider></md-divider>
</div>
